<?php

/*
$HeadURL$
$LastChangedRevision$
*/


if (!defined('TXP_INSTALL'))
	exit;

@ignore_user_abort(1);
@set_time_limit(0);

mysql_connect($dhost,$duser,$dpass,false,$dclient_flags);
mysql_select_db($ddb);

$result = mysql_query("describe `".PFX."textpattern`");
if ($result) die("Textpattern database table already exists. Can't run setup.");


$version = mysql_get_server_info();
//Use "ENGINE" if version of MySQL > (4.0.18 or 4.1.2)
$tabletype = ( intval($version[0]) >= 5 || preg_match('#^4\.(0\.[2-9]|(1[89]))|(1\.[2-9])#',$version))
	? " ENGINE=MyISAM "
	: " TYPE=MyISAM ";

// On 4.1 or greater use utf8-tables
if ( isset($dbcharset) && (intval($version[0]) >= 5 || preg_match('#^4\.[1-9]#',$version)))
{
	$tabletype .= " CHARACTER SET = $dbcharset ";
	if ($dbcharset == 'utf8')
		$tabletype .= " COLLATE utf8_general_ci ";
	mysql_query("SET NAMES ".$dbcharset);
}

// Default to messy URLs if we know clean ones won't work
$permlink_mode = 'section_id_title';
if (is_callable('apache_get_modules'))
{
	$modules = apache_get_modules();
	if (!in_array('mod_rewrite', $modules))
		$permlink_mode = 'messy';
}
else
{
	$server_software = (@$_SERVER['SERVER_SOFTWARE'] || @$_SERVER['HTTP_HOST'])
		? ( (@$_SERVER['SERVER_SOFTWARE']) ?  @$_SERVER['SERVER_SOFTWARE'] :  $_SERVER['HTTP_HOST'] )
		: '';
	if (!stristr($server_software, 'Apache'))
		$permlink_mode = 'messy';
}

$name = ps('name') ? ps('name') : 'anon';

$create_sql = array();

$create_sql[] = "CREATE TABLE `".PFX."textpattern` (
  `ID` int(11) NOT NULL auto_increment,
  `Posted` datetime NOT NULL default '0000-00-00 00:00:00',
  `AuthorID` varchar(64) NOT NULL default '',
  `LastMod` datetime NOT NULL default '0000-00-00 00:00:00',
  `LastModID` varchar(64) NOT NULL default '',
  `Title` varchar(255) NOT NULL default '',
  `Title_html` varchar(255) NOT NULL default '',
  `Body` mediumtext NOT NULL,
  `Body_html` mediumtext NOT NULL,
  `Excerpt` text NOT NULL,
  `Excerpt_html` mediumtext NOT NULL,
  `Image` varchar(255) NOT NULL default '',
  `Category1` varchar(128) NOT NULL default '',
  `Category2` varchar(128) NOT NULL default '',
  `Annotate` int(2) NOT NULL default '0',
  `AnnotateInvite` varchar(255) NOT NULL default '',
  `comments_count` int(8) NOT NULL default '0',
  `Status` int(2) NOT NULL default '4',
  `textile_body` int(2) NOT NULL default '1',
  `textile_excerpt` int(2) NOT NULL default '1',
  `Section` varchar(64) NOT NULL default '',
  `override_form` varchar(255) NOT NULL default '',
  `Keywords` varchar(255) NOT NULL default '',
  `url_title` varchar(255) NOT NULL default '',
  `custom_1` varchar(255) NOT NULL default '',
  `custom_2` varchar(255) NOT NULL default '',
  `custom_3` varchar(255) NOT NULL default '',
  `custom_4` varchar(255) NOT NULL default '',
  `custom_5` varchar(255) NOT NULL default '',
  `custom_6` varchar(255) NOT NULL default '',
  `custom_7` varchar(255) NOT NULL default '',
  `custom_8` varchar(255) NOT NULL default '',
  `custom_9` varchar(255) NOT NULL default '',
  `custom_10` varchar(255) NOT NULL default '',
  `uid` varchar(32) NOT NULL default '',
  `feed_time` date NOT NULL default '0000-00-00',
  PRIMARY KEY  (`ID`),
  KEY `categories_idx` (`Category1`(10),`Category2`(10)),
  KEY `Posted` (`Posted`),
  FULLTEXT KEY `searching` (`Title`,`Body`)
) $tabletype PACK_KEYS=1 AUTO_INCREMENT=2 ";

$setup_comment_invite = doSlash( ( gTxt('setup_comment_invite')=='setup_comment_invite') ? 'Comment' : gTxt('setup_comment_invite') );
$create_sql[] = "INSERT INTO `".PFX."textpattern` VALUES (1, now(), '".doSlash($name)."', now(), '', 'Welcome to Your Site!', '', 'h3. What do you want to do next?\n\n* Modify or even delete this article? The \"article list\":siteurl/textpattern/index.php?event=list is the place to start.\n* Change this site\'s name, or modify the style of the URLs? It\'s all up to your \"preferences\":siteurl/textpattern/index.php?event=prefs.\n* Get yourself acquainted with Textile, the humane web text generator which comes with Textpattern? The basics are \"simple\":http://textpattern.com/textile-sandbox. If you want to learn more about Textile, you can dig into an \"extensive manual\":http://textpattern.com/textile-reference-manual later.\n* Be guided through your \"Textpattern first steps\":http://textpattern.com/textpattern-first-steps by completing some basic tasks?\n* Study the \"Textpattern Semantic Model?\":http://textpattern.com/textpattern-semantic-model\n* Add \"another user\":siteurl/textpattern/index.php?event=admin, or extend the capabilities with \"third party plugins\":siteurl/textpattern/index.php?event=plugin you discovered from the central plugin directory at \"Textpattern Resources\":http://textpattern.org/?\n* Dive in and learn by trial and error? Then please note:\n** When you \"write\":siteurl/textpattern/index.php?event=article an article you assign it to a section of your site.\n** Sections use a \"page template\":siteurl/textpattern/index.php?event=page and a \"style\":siteurl/textpattern/index.php?event=css as an output scaffold.\n** Page templates use XHTML and Textpattern tags (like this: @<txp:article />@) to build the markup.\n** Some Textpattern tags use \"forms\":siteurl/textpattern/index.php?event=form, which are building blocks for reusable snippets of code and markup you may build and use at your discretion.\n\nThere are a host of \"Frequently Asked Questions\":http://textpattern.com/faq/ to help you get started.\n\n\"Textpattern tags\":http://textpattern.com/textpattern-tag-reference, their attributes and values are as well explained as sampled at the \"User Documentation\":http://textpattern.net/, where you will also find valuable tips and tutorials.\n\nIf all else fails, there\'s a whole crowd of friendly, helpful people over at the \"Textpattern support forum\":http://forum.textpattern.com/. Come and pay a visit!\n', '\t<h3>What do you want to do next?</h3>\n\n\t<ul>\n\t\t<li>Modify or even delete this article? The <a href=\"siteurl/textpattern/index.php?event=list\">article list</a> is the place to start.</li>\n\t\t<li>Change this site&#8217;s name, or modify the style of the <span class=\"caps\">URL</span>s? It&#8217;s all up to your <a href=\"siteurl/textpattern/index.php?event=prefs\">preferences</a>.</li>\n\t\t<li>Get yourself acquainted with Textile, the humane web text generator which comes with Textpattern? The basics are <a href=\"http://textpattern.com/textile-sandbox\">simple</a>. If you want to learn more about Textile, you can dig into an <a href=\"http://textpattern.com/textile-reference-manual\">extensive manual</a> later.</li>\n\t\t<li>Be guided through your <a href=\"http://textpattern.com/textpattern-first-steps\">Textpattern first steps</a> by completing some basic tasks?</li>\n\t\t<li>Study the <a href=\"http://textpattern.com/textpattern-semantic-model\">Textpattern Semantic Model?</a></li>\n\t\t<li>Add <a href=\"siteurl/textpattern/index.php?event=admin\">another user</a>, or extend the capabilities with <a href=\"siteurl/textpattern/index.php?event=plugin\">third party plugins</a> you discovered from the central plugin directory at <a href=\"http://textpattern.org/\">Textpattern Resources</a>?</li>\n\t\t<li>Dive in and learn by trial and error? Then please note:\n\t<ul>\n\t\t<li>When you <a href=\"siteurl/textpattern/index.php?event=article\">write</a> an article you assign it to a section of your site.</li>\n\t\t<li>Sections use a <a href=\"siteurl/textpattern/index.php?event=page\">page template</a> and a <a href=\"siteurl/textpattern/index.php?event=css\">style</a> as an output scaffold.</li>\n\t\t<li>Page templates use <span class=\"caps\">XHTML</span> and Textpattern tags (like this: <code>&lt;txp:article /&gt;</code>) to build the markup.</li>\n\t\t<li>Some Textpattern tags use <a href=\"siteurl/textpattern/index.php?event=form\">forms</a>, which are building blocks for reusable snippets of code and markup you may build and use at your discretion.</li>\n\t</ul></li>\n\t</ul>\n\n\t<p>There are a host of <a href=\"http://textpattern.com/faq/\">Frequently Asked Questions</a> to help you get started.</p>\n\n\t<p><a href=\"http://textpattern.com/textpattern-tag-reference\">Textpattern tags</a>, their attributes and values are as well explained as sampled at the <a href=\"http://textpattern.net/\">User Documentation</a>, where you will also find valuable tips and tutorials.</p>\n\n\t<p>If all else fails, there&#8217;s a whole crowd of friendly, helpful people over at the <a href=\"http://forum.textpattern.com/\">Textpattern support forum</a>. Come and pay a visit!</p>', '', '', '', 'hope-for-the-future', 'meaningful-labor', 1, '".$setup_comment_invite."', 1, 4, 1, 1, 'articles', '', '', 'welcome-to-your-site', '', '', '', '', '', '', '', '', '', '', '".md5(uniqid(rand(), true))."', now())";


$create_sql[] = "CREATE TABLE `".PFX."txp_category` (
  `id` int(6) NOT NULL auto_increment,
  `name` varchar(64) NOT NULL default '',
  `type` varchar(64) NOT NULL default '',
  `parent` varchar(64) NOT NULL default '',
  `lft` int(6) NOT NULL default '0',
  `rgt` int(6) NOT NULL default '0',
  `title` varchar(255) NOT NULL default '',
  PRIMARY KEY  (`id`)
) $tabletype PACK_KEYS=1 AUTO_INCREMENT=10 ";

$create_sql[] = "INSERT INTO `".PFX."txp_category` VALUES (1, 'root', 'article', '', 1, 8, 'root')";
$create_sql[] = "INSERT INTO `".PFX."txp_category` VALUES (2, 'root', 'link', '', 1, 4, 'root')";
$create_sql[] = "INSERT INTO `".PFX."txp_category` VALUES (3, 'root', 'image', '', 1, 4, 'root')";
$create_sql[] = "INSERT INTO `".PFX."txp_category` VALUES (4, 'root', 'file', '', 1, 2, 'root')";
$create_sql[] = "INSERT INTO `".PFX."txp_category` VALUES (5, 'hope-for-the-future', 'article', 'root', 2, 3, 'Hope for the Future')";
$create_sql[] = "INSERT INTO `".PFX."txp_category` VALUES (6, 'meaningful-labor', 'article', 'root', 4, 5, 'Meaningful Labor')";
$create_sql[] = "INSERT INTO `".PFX."txp_category` VALUES (7, 'reciprocal-affection', 'article', 'root', 6, 7, 'Reciprocal Affection')";
$create_sql[] = "INSERT INTO `".PFX."txp_category` VALUES (8, 'textpattern', 'link', 'root', 2, 3, 'Textpattern')";
$create_sql[] = "INSERT INTO `".PFX."txp_category` VALUES (9, 'site-design', 'image', 'root', 2, 3, 'Site Design')";


$create_sql[] = "CREATE TABLE `".PFX."txp_css` (
  `name` varchar(255) NOT NULL,
  `css` text NOT NULL,
  UNIQUE KEY `name` (`name`)
) $tabletype ";

$create_sql[] = "INSERT INTO `".PFX."txp_css` VALUES ('default', '/* =============================================================================\r\n   Styling and layout for all media\r\n   ========================================================================== */\r\n\r\n\r\n\r\n\r\n/* =============================================================================\r\n   Abridged version of Normalize.css\r\n   ========================================================================== */\r\n/* original authors: Nicolas Gallagher and Jonathan Neal - http://necolas.github.com/normalize.css/ */\r\n\r\n/* corrects block display not defined in IE7-9, Firefox3 */\r\narticle,\r\naside,\r\ndetails,\r\nfigcaption,\r\nfigure,\r\nfooter,\r\nheader,\r\nhgroup,\r\nnav,\r\nsection,\r\nsummary {\r\n    display: block;\r\n}\r\n\r\n/* corrects inline-block display not defined in IE7-9, Firefox3 */\r\naudio,\r\ncanvas,\r\nvideo {\r\n    display: inline-block;\r\n    /* display and zoom IE7 fix for display:inline-block */\r\n    *display: inline;\r\n    *zoom: 1;\r\n}\r\n\r\n/* prevents modern browsers from displaying \'audio\' without controls */\r\naudio:not([controls]) {\r\n    display: none;\r\n}\r\n\r\n/* addresses styling for \'hidden\' attribute not present in IE7-9, Firefox3, Safari4 */\r\n[hidden] {\r\n    display: none;\r\n}\r\n\r\nhtml {\r\n    /* corrects text resizing oddly in IE7 when body font-size is set using em units -\r\n      http://clagnut.com/blog/348/#c790 */\r\n    font-size: 100%;\r\n    /* always force scrollbar padding so we don\'t get \'jumping\' */\r\n    overflow-y: scroll;\r\n    /* prevents iOS text size adjust after orientation change, without disabling user zoom -\r\n      http://www.456bereastreet.com/archive/201012/controlling_text_size_in_safari_for_ios_without_disabling_user_zoom/ */\r\n    -webkit-text-size-adjust: 100%;\r\n    /* as above, for Windows Phone */\r\n    -ms-text-size-adjust: 100%;\r\n}\r\n\r\n/* Addresses margins set differently in IE7 */\r\np,\r\npre {\r\n    margin: 1em 0;\r\n}\r\n\r\n/* addresses style set to \'bolder\' in Firefox3-4, Safari4-5, Chrome */\r\nb,\r\nstrong {\r\n    font-weight: bold;\r\n}\r\n\r\n/* addresses CSS quotes not supported in IE7, addresses quote property not supported in Safari4 */\r\nq {\r\n    quotes: none;\r\n}\r\n\r\nq:before,\r\nq:after {\r\n    content: \"\";\r\n    content: none;\r\n}\r\n\r\n/* prevents sub and sup affecting line-height in all browsers */\r\nsub,\r\nsup {\r\n    /* 12px */\r\n    font-size: .85714285714286em;\r\n    line-height: 0;\r\n    position: relative;\r\n    vertical-align: baseline;\r\n}\r\n\r\nsup {\r\n    top: -0.5em;\r\n}\r\n\r\nsub {\r\n    bottom: -0.25em;\r\n}\r\n\r\n/* make table cells align top by default */\r\nth,\r\ntd {\r\n    vertical-align: top;\r\n}\r\n\r\n/* addresses margins set differently in IE7 */\r\ndl,\r\nmenu,\r\nol,\r\nul {\r\n    margin: 1em 0;\r\n}\r\ndd {\r\n    margin: 0 0 0 2em;\r\n}\r\n\r\n/* remove margins from nested lists */\r\ndl dl,\r\nul ul,\r\nol ol {\r\n    margin: 0;\r\n}\r\n\r\n/* addresses paddings set differently in IE7 */\r\nmenu,\r\nol,\r\nul {\r\n    padding: 0 0 0 2em;\r\n}\r\n\r\n\r\n/* =============================================================================\r\n   Clearfix\r\n   ========================================================================== */\r\n/* updated to prevent margin-collapsing on child elements in most situations -\r\n    http://nicolasgallagher.com/micro-clearfix-hack/ */\r\n\r\n.clearfix,\r\nheader,\r\nnav ul,\r\n.container,\r\nfooter,\r\n.checkboxes span,\r\n.radiobuttons span,\r\n#paginator,\r\n#monthly-list {\r\n    /* zoom IE7 fix */\r\n    *zoom: 1;\r\n}\r\n\r\n.clearfix:before,\r\n.clearfix:after,\r\nheader:before,\r\nheader:after,\r\nnav ul:before,\r\nnav ul:after,\r\n.container:before,\r\n.container:after,\r\nfooter:before,\r\nfooter:after,\r\n.checkboxes span:before,\r\n.checkboxes span:after,\r\n.radiobuttons span:before,\r\n.radiobuttons span:after,\r\n#paginator:before,\r\n#paginator:after,\r\n#monthly-list:before,\r\n#monthly-list:after {\r\n    content: \"\";\r\n    display: table;\r\n}\r\n\r\n.clearfix:after,\r\nheader:after,\r\nnav ul:after,\r\n.container:after,\r\nfooter:after,\r\n.checkboxes span:after,\r\n.radiobuttons span:after,\r\n#paginator:after,\r\n#monthly-list:after {\r\n    clear: both;\r\n}\r\n\r\n\r\n\r\n\r\n/* =============================================================================\r\n   Styling and layout for screen media (mobile first)\r\n   ========================================================================== */\r\n\r\n\r\n\r\n\r\n@media screen {\r\n\r\n\r\n/* =============================================================================\r\n   Layout\r\n   ========================================================================== */\r\n\r\nbody {\r\n    margin: 0;\r\n    background: #f7f7f7;\r\n}\r\n\r\n.wrapper {\r\n    border-bottom: solid 1px #ccc;\r\n    padding-top: 2em;\r\n    background: #fff;\r\n}\r\n\r\nheader,\r\n.container,\r\nfooter {\r\n    margin: 0 auto;\r\n    /* 960px / 1024px */\r\n    width: 93.75%;\r\n    max-width: 1280px;\r\n}\r\n\r\nheader {\r\n    padding-top: 1em;\r\n}\r\n\r\nheader h1 {\r\n    margin: 0;\r\n}\r\n\r\nheader h3 {\r\n    /* 14px margin top/bottom */\r\n    margin: .66666666666667em 0;\r\n  }\r\n\r\nnav {\r\n    border-top: solid 1px #e1a61a;\r\n    border-bottom: solid 1px #e1a61a;\r\n    background-color: #ffda44;\r\n    /* Konqueror */\r\n    background-image: -khtml-gradient(linear, left top, left bottom, from(#ffda44), to(#fabc2b));\r\n    /* Safari4+, Chrome */\r\n    background-image: -webkit-gradient(linear, left top, left bottom, from(#ffda44), to(#fabc2b));\r\n    /* Safari5.1+, Chrome10+ */\r\n    background-image: -webkit-linear-gradient(#ffda44, #fabc2b);\r\n    /* Firefox3.6 */\r\n    background-image: -moz-linear-gradient(#ffda44, #fabc2b);\r\n    /* IE10 */\r\n    background-image: -ms-linear-gradient(#ffda44, #fabc2b);\r\n    /* Opera11.10+ */\r\n    background-image: -o-linear-gradient(#ffda44, #fabc2b);\r\n    /* CSS3 Compliant */\r\n    background-image: linear-gradient(#ffda44, #fabc2b);\r\n    /* IE7-9 */\r\n    filter: progid:DXImageTransform.Microsoft.gradient(startColorStr=\'#ffda44\',EndColorStr=\'#fabc2b\');\r\n    /* hack to remove any border-radius in IE9 so we can keep filter gradients */\r\n    border-radius: 0 \\0;\r\n}\r\n\r\nnav h1 {\r\n    display: none;\r\n}\r\n\r\nnav ul {\r\n    margin: 0 auto;\r\n    padding: 0;\r\n    max-width: 1280px;\r\n    list-style: none;\r\n    list-style-image: none;\r\n}\r\n\r\nnav li {\r\n    margin: 0;\r\n    border-bottom: solid 1px #e1a61a;\r\n}\r\n\r\nnav li:last-child {\r\n    border-bottom: 0;\r\n}\r\n\r\nnav li:hover {\r\n    background-color: #ffe477;\r\n    /* Konqueror */\r\n    background-image: -khtml-gradient(linear, left top, left bottom, from(#ffe477), to(#fbcc5d));\r\n    /* Safari4+, Chrome */\r\n    background-image: -webkit-gradient(linear, left top, left bottom, from(#ffe477), to(#fbcc5d));\r\n    /* Safari5.1+, Chrome10+ */\r\n    background-image: -webkit-linear-gradient(#ffe477, #fbcc5d);\r\n    /* Firefox3.6 */\r\n    background-image: -moz-linear-gradient(#ffe477, #fbcc5d);\r\n    /* IE10 */\r\n    background-image: -ms-linear-gradient(#ffe477, #fbcc5d);\r\n    /* Opera11.10+ */\r\n    background-image: -o-linear-gradient(#ffe477, #fbcc5d);\r\n    /* CSS3 Compliant */\r\n    background-image: linear-gradient(#ffe477, #fbcc5d);\r\n    /* IE7-9 */\r\n    filter: progid:DXImageTransform.Microsoft.gradient(startColorStr=\'#ffe477\',EndColorStr=\'#fbcc5d\');\r\n    /* hack to remove any border-radius in IE9 so we can keep filter gradients */\r\n    border-radius: 0 \\0;\r\n}\r\n\r\nnav li:active {\r\n    background-color: #fabc2b;\r\n    /* Konqueror */\r\n    background-image: -khtml-gradient(linear, left top, left bottom, from(#fabc2b), to(#ffda44));\r\n    /* Safari4+, Chrome */\r\n    background-image: -webkit-gradient(linear, left top, left bottom, from(#fabc2b), to(#ffda44));\r\n    /* Safari5.1+, Chrome10+ */\r\n    background-image: -webkit-linear-gradient(#fabc2b, #ffda44);\r\n    /* Firefox3.6 */\r\n    background-image: -moz-linear-gradient(#fabc2b, #ffda44);\r\n    /* IE10 */\r\n    background-image: -ms-linear-gradient(#fabc2b, #ffda44);\r\n    /* Opera11.10+ */\r\n    background-image: -o-linear-gradient(#fabc2b, #ffda44);\r\n    /* CSS3 Compliant */\r\n    background-image: linear-gradient(#fabc2b, #ffda44);\r\n    /* IE7-9 */\r\n    filter: progid:DXImageTransform.Microsoft.gradient(startColorStr=\'#fabc2b\',EndColorStr=\'#ffda44\');\r\n    /* hack to remove any border-radius in IE9 so we can keep filter gradients */\r\n    border-radius: 0 \\0;\r\n}\r\n\r\nnav a {\r\n    text-shadow: 1px 1px 0 rgba(255, 255, 255, 0.5);\r\n    display: block;\r\n    padding: .5em 3.125%;\r\n    color: #333;\r\n}\r\n\r\n[role=\"article\"] {\r\n    margin-bottom: 2em;\r\n}\r\n\r\n[role=\"complementary\"] {\r\n    margin-bottom: 2em;\r\n    padding-top: 2em;\r\n    border-top: dashed 2px #ccc;\r\n}\r\n\r\n[role=\"search\"] p {\r\n    margin-top: 0;\r\n}\r\n\r\nfooter {\r\n    padding: .5em 0;\r\n}\r\n\r\n\r\n/* =============================================================================\r\n   Links\r\n   ========================================================================== */\r\n\r\na {\r\n    position: relative;\r\n    text-decoration: none;\r\n    color: #114eb1;\r\n    -webkit-tap-highlight-color: rgba(0, 102, 255, 0.5);\r\n}\r\n\r\na:hover, a:active {\r\n    /* improves readability when focused and also mouse hovered in all browsers */\r\n    outline: 0;\r\n}\r\n\r\na:active {\r\n    top: 1px;\r\n}\r\n\r\na:focus {\r\n    outline: thin dotted #06f;\r\n}\r\n\r\nheader a {\r\n    color: #333;\r\n    -moz-border-radius: .11904761904762em;\r\n    border-radius: .11904761904762em;\r\n}\r\n\r\nheader a:hover, header a:active {\r\n    background: #e8e8e8;\r\n}\r\n\r\n[role=\"main\"] a:hover,\r\n[role=\"main\"] a:active,\r\n[role=\"complementary\"] a:hover,\r\n[role=\"complementary\"] a:active,\r\nfooter a:hover,\r\nfooter a:active {\r\n    text-decoration: underline;\r\n    color: #06f;\r\n}\r\n\r\n[role=\"main\"] a:visited,\r\n[role=\"complementary\"] a:visited,\r\nfooter a:visited {\r\n    color: #183082;\r\n}\r\n\r\n[role=\"main\"] h1 a {\r\n    color: #333;\r\n    -moz-border-radius: .11904761904762em;\r\n    border-radius: .11904761904762em;\r\n}\r\n\r\n[role=\"main\"] h1 a:visited {\r\n    color: #333;\r\n}\r\n\r\n[role=\"main\"] h1 a:hover,\r\n[role=\"main\"] h1 a:active {\r\n    text-decoration: none;\r\n    color: #333;\r\n    background: #efefef;\r\n}\r\n\r\n\r\n/* =============================================================================\r\n   Typography\r\n   ========================================================================== */\r\n\r\nbody {\r\n    font-family: \"PT Serif\", Georgia, serif;\r\n    /* 14px / 16px */\r\n    font-size: 0.875em;\r\n    line-height: 1.5;\r\n    color: #333;\r\n}\r\n\r\nnav {\r\n    font-family: Arial, Helvetica, sans-serif;\r\n    font-weight: bold;\r\n}\r\n\r\nh1 {\r\n    font-family: Arial, Helvetica, sans-serif;\r\n    /* 28px */\r\n    font-size: 2em;\r\n    /* 52px / 42px */\r\n    line-height: 1.23809523809524;\r\n    letter-spacing: -1px;\r\n    /* 28px margin top/bottom */\r\n    margin: .66666666666667em 0;\r\n}\r\n\r\nh1:first-child {\r\n    margin-top: 0;\r\n}\r\n\r\nh2 {\r\n    font-family: Arial, Helvetica, sans-serif;\r\n    /* 21px */\r\n    font-size: 1.5em;\r\n    /* 40px / 28px */\r\n    line-height: 1.42857142857143;\r\n    /* 21px margin top/bottom */\r\n    margin: .75em 0;\r\n}\r\n\r\nh3 {\r\n    /* 18px */\r\n    font-size: 1.28571428571429em;\r\n    font-weight: normal;\r\n    font-style: italic;\r\n    /* 16px margin top/bottom */\r\n    margin: .76190476190476em 0;\r\n}\r\n\r\nh4 {\r\n    font-family: Arial, Helvetica, sans-serif;\r\n    /* 16px */\r\n    font-size: 1.14285714285714em;\r\n    margin: 0;\r\n}\r\n\r\nblockquote {\r\n    /* 16px */\r\n    font-size: 1.14285714285714em;\r\n    font-style: italic;\r\n    margin: .875em 0 .875em 0;\r\n    padding: 1px .875em;\r\n    -moz-border-radius: .35714285714286em;\r\n    border-radius: .35714285714286em;\r\n    background: #fff6d3;\r\n}\r\n\r\ndfn,\r\nq {\r\n    font-style: italic;\r\n    background: #fff6d3;\r\n}\r\n\r\naddress {\r\n    margin: 1em 0;\r\n}\r\n\r\n/* addresses styling not present in IE7-9, Safari5, Chrome */\r\nabbr[title],\r\ndfn[title] {\r\n    border-bottom: dotted 1px;\r\n    cursor: help;\r\n}\r\n\r\nmark,\r\nvar {\r\n    padding: 0 .21428571428571em;\r\n    -moz-border-radius: .21428571428571em;\r\n    border-radius: .21428571428571em;\r\n    color: #333;\r\n    background: #fff6d3;\r\n}\r\n\r\nvar {\r\n    font-weight: bold;\r\n}\r\n\r\npre,\r\ncode,\r\nkbd,\r\nsamp {\r\n    font-family: Cousine, Consolas, \"Lucida Console\", Monaco, monospace;\r\n}\r\n\r\ncode,\r\nkbd,\r\nsamp {\r\n    /* 13px */\r\n    font-size: .92857142857143em;\r\n    border: 1px solid #e3e3e3;\r\n    padding: 0 .23076923076923em;\r\n    -moz-border-radius: .23076923076923em;\r\n    border-radius: .23076923076923em;\r\n    background: #f7f7f7;\r\n}\r\n\r\npre {\r\n    /* 13px */\r\n    font-size: .92857142857143em;\r\n    overflow-x: auto;\r\n    border: 1px solid #e3e3e3;\r\n    padding: 1em;\r\n    -moz-border-radius: .35714285714286em;\r\n    border-radius: .35714285714286em;\r\n    background: #f7f7f7;\r\n}\r\n\r\npre code {\r\n    /* 13px */\r\n    font-size: 1em;\r\n    border: 0;\r\n    background: none;\r\n}\r\n\r\nsmall,\r\nfigcaption,\r\ntfoot,\r\n.footnote {\r\n    /* 12px */\r\n    font-size: .85714285714286em;\r\n}\r\n\r\nfigcaption,\r\ntfoot,\r\n.footnote {\r\n    color: #888;\r\n}\r\n\r\nfigcaption {\r\n    margin-top: .33333333333333em;\r\n    font-style: italic;\r\n}\r\n\r\n\r\n/* =============================================================================\r\n   Embedded content\r\n   ========================================================================== */\r\n\r\n/* removes border when inside \'a\' element in IE7-9, Firefox3, improves image quality when scaled in IE7 -\r\n    code.flickr.com/blog/2008/11/12/on-ui-quality-the-little-things-client-side-image-resizing/ */\r\nimg {\r\n    border: 0;\r\n    -ms-interpolation-mode: bicubic;\r\n}\r\n\r\n/* image alignemnts */\r\nimg.align-left {\r\n    float: left;\r\n    margin: 1em 1em 1em 0;\r\n}\r\nimg.align-right {\r\n    float: right;\r\n    margin: 1em 0 1em 1em;\r\n}\r\nimg.align-center {\r\n    display: block;\r\n    margin: 1em auto;\r\n}\r\n\r\n/* corrects overflow displayed oddly in IE9 */\r\n  svg:not(:root) {\r\n    overflow: hidden;\r\n}\r\n\r\narticle img,\r\narticle embed,\r\narticle object,\r\narticle video {\r\n    max-width: 100%;\r\n}\r\n\r\nfigure {\r\n    margin: 0;\r\n}\r\n\r\n\r\n/* =============================================================================\r\n   Tables\r\n   ========================================================================== */\r\n\r\ntable {\r\n    margin-bottom: 1em;\r\n    border-collapse: collapse;\r\n    border-spacing: 0;\r\n    width: 100%;\r\n}\r\n\r\ncaption {\r\n    font-style: italic;\r\n    text-align: left;\r\n    margin-bottom: .5em;\r\n}\r\n\r\nth,\r\ntd {\r\n    border-bottom: solid 1px #ccc;\r\n    padding: .28571428571429em .5em .28571428571429em 0;\r\n}\r\n\r\nth:last-child,\r\ntd:last-child {\r\n    padding-right: 0;\r\n}\r\n\r\nth {\r\n    text-align: left;\r\n}\r\n\r\nthead th,\r\nthead td {\r\n    border-bottom: solid 2px #ccc;\r\n}\r\n\r\ntfoot th,\r\ntfoot td {\r\n    border-bottom: 0;\r\n    padding: .33333333333333em .58333333333333em .33333333333333em 0;\r\n}\r\n\r\ntfoot:last-child {\r\n    padding-right: 0;\r\n}\r\n\r\n\r\n/* =============================================================================\r\n   Lists\r\n   ========================================================================== */\r\n\r\ndt {\r\n    font-style: italic;\r\n}\r\n\r\n#monthly-list {\r\n    list-style: none;\r\n    padding: 0;\r\n}\r\n\r\n#monthly-list li {\r\n    font-family: Arial, Helvetica, sans-serif;\r\n    text-align: center;\r\n    float: left;\r\n    display: block;\r\n    margin: 0 .5em .5em 0;\r\n    min-width: 2.5em;\r\n    border: solid 1px #ccc;\r\n    -moz-border-radius: .35714285714286em;\r\n    border-radius: .35714285714286em;\r\n    -webkit-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);\r\n    -moz-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);\r\n    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);\r\n    background: #fff;\r\n}\r\n\r\n#monthly-list li:active {\r\n    position: relative;\r\n    top: 1px;\r\n}\r\n\r\n#monthly-list a {\r\n    display: block;\r\n    text-decoration: none;\r\n    color: #333;\r\n}\r\n\r\n#monthly-list a:hover,\r\n#monthly-list a:focus {\r\n    color: #1a1a1a;\r\n}\r\n\r\n#monthly-list a:focus {\r\n    outline: 0;\r\n}\r\n\r\n#monthly-list a:active {\r\n    top: 0;\r\n}\r\n\r\n#monthly-list a .archive-year {\r\n    /* 12px */\r\n    font-size: .85714285714286em;\r\n    font-weight: bold;\r\n    text-shadow: 1px 1px 0 rgba(255, 255, 255, 0.5);\r\n    -moz-border-radius: .35714285714286em .35714285714286em 0 0;\r\n    border-radius: .35714285714286em .35714285714286em 0 0;\r\n    padding: 0 .33333333333333em;\r\n    background-color: #ffda44;\r\n    /* Konqueror */\r\n    background-image: -khtml-gradient(linear, left top, left bottom, from(#ffda44), to(#fabc2b));\r\n    /* Safari4+, Chrome */\r\n    background-image: -webkit-gradient(linear, left top, left bottom, from(#ffda44), to(#fabc2b));\r\n    /* Safari5.1+, Chrome10+ */\r\n    background-image: -webkit-linear-gradient(#ffda44, #fabc2b);\r\n    /* Firefox3.6 */\r\n    background-image: -moz-linear-gradient(#ffda44, #fabc2b);\r\n    /* IE10 */\r\n    background-image: -ms-linear-gradient(#ffda44, #fabc2b);\r\n    /* Opera11.10+ */\r\n    background-image: -o-linear-gradient(#ffda44, #fabc2b);\r\n    /* CSS3 Compliant */\r\n    background-image: linear-gradient(#ffda44, #fabc2b);\r\n    /* IE7-9 */\r\n    filter: progid:DXImageTransform.Microsoft.gradient(startColorStr=\'#ffda44\',EndColorStr=\'#fabc2b\');\r\n    /* hack to remove any border-radius in IE9 so we can keep filter gradients */\r\n    border-radius: 0 \\0;\r\n}\r\n\r\n#monthly-list a:hover .archive-year,\r\n#monthly-list a:focus .archive-year {\r\n    background-color: #ffe477;\r\n    /* Konqueror */\r\n    background-image: -khtml-gradient(linear, left top, left bottom, from(#ffe477), to(#fbcc5d));\r\n    /* Safari4+, Chrome */\r\n    background-image: -webkit-gradient(linear, left top, left bottom, from(#ffe477), to(#fbcc5d));\r\n    /* Safari5.1+, Chrome10+ */\r\n    background-image: -webkit-linear-gradient(#ffe477, #fbcc5d);\r\n    /* Firefox3.6 */\r\n    background-image: -moz-linear-gradient(#ffe477, #fbcc5d);\r\n    /* IE10 */\r\n    background-image: -ms-linear-gradient(#ffe477, #fbcc5d);\r\n    /* Opera11.10+ */\r\n    background-image: -o-linear-gradient(#ffe477, #fbcc5d);\r\n    /* CSS3 Compliant */\r\n    background-image: linear-gradient(#ffe477, #fbcc5d);\r\n    /* IE7-9 */\r\n    filter: progid:DXImageTransform.Microsoft.gradient(startColorStr=\'#ffe477\',EndColorStr=\'#fbcc5d\');\r\n    /* hack to remove any border-radius in IE9 so we can keep filter gradients */\r\n    border-radius: 0 \\0;\r\n}\r\n\r\n#monthly-list a .archive-month {\r\n    -moz-border-radius: 0 0 .35714285714286em .35714285714286em;\r\n    border-radius: 0 0 .35714285714286em .35714285714286em;\r\n    padding: 0 .28571428571429em;\r\n}\r\n\r\n#monthly-list a:hover .archive-month,\r\n#monthly-list a:focus .archive-month {\r\n    background: #fff6d3;\r\n}\r\n\r\n#monthly-list span {\r\n    display: block;\r\n    /* IE7 padding fix */\r\n    *position: relative;\r\n    *top: -2px;\r\n}\r\n\r\n[role=\"main\"] #article-list {\r\n    list-style: none;\r\n    margin: 0 0 2em 0;\r\n    padding: 0;\r\n    border-top: solid 1px #ccc;\r\n}\r\n\r\n#article-list li {\r\n    border-bottom: solid 1px #ccc;\r\n    padding-top: 1em;\r\n}\r\n\r\n\r\n/* =============================================================================\r\n   Forms\r\n   ========================================================================== */\r\n\r\n/* corrects margin displayed oddly in IE6-7 */\r\nform {\r\n    margin: 0;\r\n}\r\n\r\n/* remove default fieldset styling across browsers */\r\nfieldset {\r\n    margin: 0;\r\n    border: 0;\r\n    padding: 0;\r\n}\r\n\r\n/* Corrects color not being inherited in IE7-9, corrects text not wrapping in FF3, corrects alignment displayed oddly in IE7 */\r\nlegend {\r\n    border: 0;\r\n    padding: 0;\r\n    white-space: normal;\r\n    *margin-left: -7px;\r\n}\r\n\r\n/* improves appearance and consistency in all browsers */\r\nbutton,\r\n.button,\r\ninput,\r\nselect,\r\ntextarea {\r\n    font-size: 100%;\r\n    margin: 0;\r\n    vertical-align: baseline;\r\n    /* improves appearance and consistency in IE7 */\r\n    *vertical-align: middle;\r\n}\r\n\r\n/* colour placeholder text (Webkit and Mozilla only, so far) */\r\ninput::-webkit-input-placeholder,\r\ntextarea::-webkit-input-placeholder {\r\n    color: #888;\r\n}\r\n\r\ninput:-moz-placeholder,\r\ntextarea:-moz-placeholder {\r\n    color: #888;\r\n}\r\n\r\n/* suppress red glow that Firefox adds to form fields by default, even when user is still typing\r\n    and kill phantom spacing and dotted border that appears in Firefox */\r\ninput:invalid,\r\nbutton:invalid,\r\nselect:invalid,\r\ntextarea:invalid {\r\n    -webkit-box-shadow: none;\r\n    -moz-box-shadow: none;\r\n    box-shadow: none;\r\n}\r\ninput::-moz-focus-inner,\r\nbutton::-moz-focus-inner,\r\nselect::-moz-focus-inner,\r\ntextarea::-moz-focus-inner {\r\n    border: 0;\r\n    padding: 0;\r\n}\r\n\r\n/* remove inner padding and search cancel button in Safari, Chrome on OS X */\r\ninput[type=\"search\"]::-webkit-search-decoration,\r\ninput[type=\"search\"]::-webkit-search-cancel-button {\r\n    -webkit-appearance: none;\r\n}\r\n\r\nbutton:focus,\r\ninput:focus,\r\nselect:focus,\r\ntextarea:focus {\r\n    -webkit-box-shadow: 0 0 7px #06f;\r\n    -moz-box-shadow: 0 0 7px #06f;\r\n    box-shadow: 0 0 7px #06f;\r\n    /* Opera */\r\n    z-index: 1;\r\n}\r\n\r\ninput[type=\"file\"]:focus,\r\ninput[type=\"file\"]:active,\r\ninput[type=\"radio\"]:focus,\r\ninput[type=\"radio\"]:active,\r\ninput[type=\"checkbox\"]:focus,\r\ninput[type=\"checkbox\"]:active {\r\n    -webkit-box-shadow: none;\r\n    -moz-box-shadow: none;\r\n    box-shadow: none;\r\n}\r\n\r\ntextarea,\r\ninput[type=\"date\"],\r\ninput[type=\"datetime\"],\r\ninput[type=\"datetime-local\"],\r\ninput[type=\"email\"],\r\ninput[type=\"month\"],\r\ninput[type=\"number\"],\r\ninput[type=\"password\"],\r\ninput[type=\"search\"],\r\ninput[type=\"tel\"],\r\ninput[type=\"text\"],\r\ninput[type=\"time\"],\r\ninput[type=\"url\"],\r\ninput[type=\"week\"] {\r\n    font-family: Arial, Helvetica, sans-serif;\r\n    /* 12px */\r\n    font-size: .85714285714286em;\r\n    text-align: left;\r\n    border: solid 1px #ccc;\r\n    padding: .5em;\r\n    background: #fff;\r\n    outline: 0;\r\n    -webkit-box-sizing: border-box;\r\n    -moz-box-sizing: border-box;\r\n    box-sizing: border-box;\r\n    /* remove iOS Safari default styling */\r\n    -webkit-appearance: none;\r\n    -moz-border-radius: 0;\r\n    border-radius: 0;\r\n}\r\n\r\n[role=\"complementary\"] input[type=\"search\"] {\r\n    margin-right: 2px;\r\n    width: 66.666666666667%;\r\n    display: inline-block;\r\n    /* display and zoom IE7 fix for display:inline-block */\r\n    *display: inline;\r\n    *zoom: 1;\r\n}\r\n\r\ntextarea[disabled],\r\nselect[disabled],\r\ninput[type=\"date\"][disabled],\r\ninput[type=\"datetime\"][disabled],\r\ninput[type=\"datetime-local\"][disabled],\r\ninput[type=\"email\"][disabled],\r\ninput[type=\"month\"][disabled],\r\ninput[type=\"number\"][disabled],\r\ninput[type=\"password\"][disabled],\r\ninput[type=\"search\"][disabled],\r\ninput[type=\"tel\"][disabled],\r\ninput[type=\"text\"][disabled],\r\ninput[type=\"time\"][disabled],\r\ninput[type=\"url\"][disabled],\r\ninput[type=\"week\"][disabled] {\r\n    background-color: #eee;\r\n}\r\n\r\n/* make sure disable elements really are disabled */\r\nbutton[disabled],\r\ninput[disabled],\r\nselect[disabled],\r\nselect[disabled] option,\r\nselect[disabled] optgroup,\r\ntextarea[disabled] {\r\n    -webkit-box-shadow: none;\r\n    -moz-box-shadow: none;\r\n    box-shadow: none;\r\n    -khtml-user-select: none;\r\n    -webkit-user-select: none;\r\n    -moz-user-select: -moz-none;\r\n    user-select: none;\r\n    color: #888;\r\n    cursor: default;\r\n}\r\n\r\ntextarea {\r\n    min-height: 3em;\r\n    /* removes default vertical scrollbar in IE7-9 */\r\n    overflow: auto;\r\n    /* improves readability and alignment in all browsers */\r\n    vertical-align: top;\r\n    -moz-resize: vertical;\r\n    resize: vertical;\r\n    width: 100%;\r\n}\r\n\r\nselect {\r\n    font-family: Arial, Helvetica, sans-serif;\r\n    /* 12px */\r\n    font-size: .85714285714286em;\r\n    text-align: left;\r\n    border: solid 1px #ccc;\r\n    padding: .5em;\r\n    background: #fff;\r\n    outline: 0;\r\n    -webkit-box-sizing: border-box;\r\n    -moz-box-sizing: border-box;\r\n    box-sizing: border-box;\r\n}\r\n\r\ntextarea,\r\nselect[size],\r\nselect[multiple] {\r\n    height: auto;\r\n}\r\n\r\noptgroup {\r\n    font-family: Arial, Helvetica, sans-serif;\r\n    font-style: normal;\r\n    font-weight: normal;\r\n    color: #333;\r\n}\r\n\r\n/* kill phantom spacing and dotted border that appears in Firefox */\r\noptgroup::-moz-focus-inner {\r\n    border: 0;\r\n    padding: 0;\r\n}\r\n\r\n.large input {\r\n    width: 50%;\r\n    min-width: 302px;\r\n}\r\n\r\n.large textarea {\r\n    height: 156px;\r\n}\r\n\r\n.small input {\r\n    width: 25%;\r\n    min-width: 151px;\r\n}\r\n\r\n.small textarea {\r\n    height: 5.5em;\r\n}\r\n\r\n/* addresses box sizing set to content-box and excess padding in IE7-9 */\r\ninput[type=\"checkbox\"],\r\ninput[type=\"radio\"] {\r\n    -webkit-box-sizing: border-box;\r\n    -moz-box-sizing: border-box;\r\n    box-sizing: border-box;\r\n    padding: 0;\r\n    *height: 1em;\r\n    *width: 1em;\r\n}\r\n\r\n.checkboxes span,\r\n.radiobuttons span {\r\n    display: block;\r\n}\r\n\r\n.checkboxes input,\r\n.radiobuttons input {\r\n    float: left;\r\n    margin-right: .5em;\r\n}\r\n\r\n.checkboxes label,\r\n.radiobuttons label {\r\n    float: left;\r\n    display: block;\r\n}\r\n\r\n\r\n/* =============================================================================\r\n   Buttons\r\n   ========================================================================== */\r\n\r\n/* make buttons play nice in IE - http://www.viget.com/inspire/styling-the-button-element-in-internet-explorer/ */\r\ninput,\r\nbutton,\r\n.button {\r\n    width: auto;\r\n    overflow: visible;\r\n}\r\n\r\nbutton,\r\n.button,\r\ninput[type=\"button\"],\r\ninput[type=\"reset\"],\r\ninput[type=\"submit\"] {\r\n    -webkit-background-clip: padding;\r\n    -moz-background-clip: padding;\r\n    -ms-background-clip: padding-box;\r\n    -o-background-clip: padding-box;\r\n    background-clip: padding-box;\r\n    font-family: Arial, Helvetica, sans-serif;\r\n    /* 12px */\r\n    font-size: .85714285714286em;\r\n    font-weight: normal;\r\n    text-align: center;\r\n    text-shadow: 1px 1px 0 rgba(255, 255, 255, 0.5);\r\n    cursor: pointer;\r\n    border: solid 1px #e1a61a;\r\n    -moz-border-radius: .35714285714286em;\r\n    border-radius: .35714285714286em;\r\n    padding: .5em 1em .5em;\r\n    display: inline-block;\r\n    /* display and zoom IE7 fix for display:inline-block */\r\n    *display: inline;\r\n    *zoom: 1;\r\n    color: #333;\r\n    background-color: #ffda44;\r\n    /* Konqueror */\r\n    background-image: -khtml-gradient(linear, left top, left bottom, from(#ffda44), to(#fabc2b));\r\n    /* Safari4+, Chrome */\r\n    background-image: -webkit-gradient(linear, left top, left bottom, from(#ffda44), to(#fabc2b));\r\n    /* Safari5.1+, Chrome10+ */\r\n    background-image: -webkit-linear-gradient(#ffda44, #fabc2b);\r\n    /* Firefox3.6 */\r\n    background-image: -moz-linear-gradient(#ffda44, #fabc2b);\r\n    /* IE10 */\r\n    background-image: -ms-linear-gradient(#ffda44, #fabc2b);\r\n    /* Opera11.10+ */\r\n    background-image: -o-linear-gradient(#ffda44, #fabc2b);\r\n    /* CSS3 Compliant */\r\n    background-image: linear-gradient(#ffda44, #fabc2b);\r\n    /* IE7-9 */\r\n    filter: progid:DXImageTransform.Microsoft.gradient(startColorStr=\'#ffda44\',EndColorStr=\'#fabc2b\');\r\n    /* hack to remove any border-radius in IE9 so we can keep filter gradients */\r\n    border-radius: 0 \\0;\r\n    -webkit-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);\r\n    -moz-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);\r\n    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);\r\n}\r\n\r\nbutton:hover,\r\n.button:hover,\r\ninput[type=\"button\"]:hover,\r\ninput[type=\"reset\"]:hover,\r\ninput[type=\"submit\"]:hover {\r\n    background-color: #ffe477;\r\n    /* Konqueror */\r\n    background-image: -khtml-gradient(linear, left top, left bottom, from(#ffe477), to(#fbcc5d));\r\n    /* Safari4+, Chrome */\r\n    background-image: -webkit-gradient(linear, left top, left bottom, from(#ffe477), to(#fbcc5d));\r\n    /* Safari5.1+, Chrome10+ */\r\n    background-image: -webkit-linear-gradient(#ffe477, #fbcc5d);\r\n    /* Firefox3.6 */\r\n    background-image: -moz-linear-gradient(#ffe477, #fbcc5d);\r\n    /* IE10 */\r\n    background-image: -ms-linear-gradient(#ffe477, #fbcc5d);\r\n    /* Opera11.10+ */\r\n    background-image: -o-linear-gradient(#ffe477, #fbcc5d);\r\n    /* CSS3 Compliant */\r\n    background-image: linear-gradient(#ffe477, #fbcc5d);\r\n    /* IE7-9 */\r\n    filter: progid:DXImageTransform.Microsoft.gradient(startColorStr=\'#ffe477\',EndColorStr=\'#fbcc5d\');\r\n    /* hack to remove any border-radius in IE9 so we can keep filter gradients */\r\n    border-radius: 0 \\0;\r\n}\r\n\r\nbutton:active,\r\n.button:active,\r\ninput[type=\"button\"]:active,\r\ninput[type=\"reset\"]:active,\r\ninput[type=\"submit\"]:active {\r\n    position: relative;\r\n    top: 1px;\r\n    color: #1a1a1a;\r\n    background-color: #fabc2b;\r\n    /* Konqueror */\r\n    background-image: -khtml-gradient(linear, left top, left bottom, from(#fabc2b), to(#ffda44));\r\n    /* Safari4+, Chrome */\r\n    background-image: -webkit-gradient(linear, left top, left bottom, from(#fabc2b), to(#ffda44));\r\n    /* Safari5.1+, Chrome10+ */\r\n    background-image: -webkit-linear-gradient(#fabc2b, #ffda44);\r\n    /* Firefox3.6 */\r\n    background-image: -moz-linear-gradient(#fabc2b, #ffda44);\r\n    /* IE10 */\r\n    background-image: -ms-linear-gradient(#fabc2b, #ffda44);\r\n    /* Opera11.10+ */\r\n    background-image: -o-linear-gradient(#fabc2b, #ffda44);\r\n    /* CSS3 Compliant */\r\n    background-image: linear-gradient(#fabc2b, #ffda44);\r\n    /* IE7-9 */\r\n    filter: progid:DXImageTransform.Microsoft.gradient(startColorStr=\'#fabc2b\',EndColorStr=\'#ffda44\');\r\n    /* hack to remove any border-radius in IE9 so we can keep filter gradients */\r\n    border-radius: 0 \\0;\r\n}\r\n\r\ninput[type=\"submit\"].disabled,\r\n#paginator span.disabled {\r\n    text-shadow: none;\r\n    top: 0;\r\n    cursor: default;\r\n    border: solid 1px #d2d2d2;\r\n    color: #888;\r\n    background-color: #e6e6e6;\r\n    /* Konqueror */\r\n    background-image: -khtml-gradient(linear, left top, left bottom, from(#e6e6e6), to(#dadada));\r\n    /* Safari4+, Chrome */\r\n    background-image: -webkit-gradient(linear, left top, left bottom, from(#e6e6e6), to(#dadada));\r\n    /* Safari5.1+, Chrome10+ */\r\n    background-image: -webkit-linear-gradient(#e6e6e6, #dadada);\r\n    /* Firefox3.6 */\r\n    background-image: -moz-linear-gradient(#e6e6e6, #dadada);\r\n    /* IE10 */\r\n    background-image: -ms-linear-gradient(#e6e6e6, #dadada);\r\n    /* Opera11.10+ */\r\n    background-image: -o-linear-gradient(#e6e6e6, #dadada);\r\n    /* CSS3 Compliant */\r\n    background-image: linear-gradient(#e6e6e6, #dadada);\r\n    /* IE7-9 */\r\n    filter: progid:DXImageTransform.Microsoft.gradient(startColorStr=\'#e6e6e6\',EndColorStr=\'#dadada\');\r\n    /* hack to remove any border-radius in IE9 so we can keep filter gradients */\r\n    border-radius: 0 \\0;\r\n}\r\n\r\n#paginator {\r\n    margin-bottom: 2em;\r\n}\r\n\r\n#paginator .button {\r\n    padding: .1em 1em;\r\n}\r\n\r\n#paginator a.button {\r\n    text-decoration: none;\r\n    color: #333;\r\n}\r\n\r\n#paginator-l {\r\n    float: left;\r\n}\r\n\r\n#paginator-r {\r\n    float: right;\r\n}\r\n\r\n\r\n/* =============================================================================\r\n   Comments\r\n   ========================================================================== */\r\n\r\n.comments {\r\n    margin-bottom: 1em;\r\n    -moz-border-radius: .35714285714286em;\r\n    border-radius: .35714285714286em;\r\n    padding: 1em 1em 1px;\r\n    background: #f7f7f7;\r\n}\r\n\r\n.comments h4 span {\r\n    font-weight: normal;\r\n}\r\n\r\n.comments h4 .comment-anchor {\r\n    float: right;\r\n }\r\n\r\n.comments-author {\r\n    background: #efefef;\r\n}\r\n\r\n#cpreview {\r\n    margin-bottom: 2px;\r\n    -moz-border-radius: .35714285714286em;\r\n    border-radius: .35714285714286em;\r\n    padding: 1em;\r\n    background: #fff3d6;\r\n}\r\n\r\n.comments_error {\r\n    background: #fff4f4 !important;\r\n}\r\n\r\n.required,\r\n.error_message li {\r\n    color: #c00;\r\n}\r\n\r\n\r\n}\r\n\r\n\r\n/* addresses select alignment in Safari/Chrome */\r\n@media screen and (-webkit-min-device-pixel-ratio: 0) {\r\n\r\n\r\nselect,\r\nselect[size=\"0\"],\r\nselect[size=\"1\"] {\r\n    height: 2.33333333333333em;\r\n}\r\n\r\nselect:not([size]),\r\nselect:not([multiple]) {\r\n    position: relative;\r\n    top: -1px;\r\n}\r\n\r\n\r\n}\r\n\r\n\r\n\r\n\r\n/* =============================================================================\r\n   Additional layout for screen media 490px and up\r\n   ========================================================================== */\r\n\r\n\r\n\r\n\r\n@media only screen and (min-width: 35em) {\r\n\r\n\r\nnav ul {\r\n    width: 93.75%;\r\n}\r\n\r\nnav li {\r\n    float: left;\r\n    border-right: solid 1px #e1a61a;\r\n    border-bottom: 0;\r\n}\r\n\r\nnav li:first-child {\r\n    border-left: solid 1px #e1a61a;\r\n}\r\n\r\nnav a {\r\n    padding: .5em 1em;\r\n}\r\n\r\n\r\n}\r\n\r\n\r\n\r\n\r\n/* =============================================================================\r\n   Additional layout for screen media 770px and up\r\n   ========================================================================== */\r\n\r\n\r\n\r\n\r\n@media only screen and (min-width: 35em) {\r\n\r\n\r\n[role=\"main\"] {\r\n    float: left;\r\n    /* 592px / 960px */\r\n    width: 61.666666666667%;\r\n}\r\n\r\n[role=\"complementary\"] {\r\n    float: right;\r\n    border: 1px solid #e3e3e3;\r\n    -moz-border-radius: .35714285714286em;\r\n    border-radius: .35714285714286em;\r\n    padding: 1em 1em 0;\r\n    /* 290px / 960px */\r\n    width: 30.208333333333%;\r\n    background: #f7f7f7;\r\n}\r\n\r\nh1 {\r\n    /* 42px */\r\n    font-size: 3em;\r\n}\r\n\r\nh2 {\r\n    /* 28px */\r\n    font-size: 2em;\r\n}\r\n\r\nh3 {\r\n    /* 21px */\r\n    font-size: 1.5em;\r\n}\r\n\r\nblockquote {\r\n    float: right;\r\n    margin: 0 0 .875em .875em;\r\n    /* 254px / 592px */\r\n    width: 42.905405405405%;\r\n}\r\n\r\n\r\n}\r\n\r\n\r\n\r\n\r\n/* =============================================================================\r\n   Additional layout for screen media 1260px and up\r\n   ========================================================================== */\r\n\r\n\r\n\r\n\r\n@media only screen and (min-width: 90em) {\r\n\r\n\r\nbody {\r\n    /* 16px */\r\n    font-size: 100%;\r\n}\r\n\r\nheader,\r\nnav ul,\r\n.container,\r\nfooter {\r\n    /* 1152px / 1280px */\r\n    width: 90%;\r\n}\r\n\r\n\r\n}\r\n\r\n\r\n\r\n\r\n/* =============================================================================\r\n   Styling and layout for print media\r\n   ========================================================================== */\r\n\r\n\r\n\r\n\r\n@media print {\r\n\r\n\r\n* {\r\n    /* black prints faster - http://sanbeiji.com/archives/953 */\r\n    color: black !important;\r\n    text-shadow: none !important;\r\n    background: transparent !important;\r\n    -webkit-box-shadow: none !important;\r\n    -moz-box-shadow: none !important;\r\n    box-shadow: none !important;\r\n    filter: none !important;\r\n}\r\n\r\nbody {\r\n    font-family: \"Helvetica Neue\", Helvetica, Arial, sans-serif;\r\n    font-size: 8pt;\r\n    line-height: 12pt;\r\n    margin: .5cm;\r\n    padding: 2em 6em;\r\n}\r\n\r\nheader {\r\n    margin-bottom: 24pt;\r\n    border-bottom: solid 1pt black;\r\n}\r\n\r\nfooter {\r\n    margin-top: 12pt;\r\n    border-top: solid 1pt black;\r\n    padding-top: 12pt;\r\n}\r\n\r\n/* hide unnecessary content from print */\r\nnav,\r\n[role=\"complementary\"],\r\n#paginator,\r\n#comments-form,\r\n.comments h4 a:last-child {\r\n    display: none;\r\n}\r\n\r\na {\r\n    text-decoration: none;\r\n}\r\n\r\n/* show URLs for certain links in print */\r\na[href]:after {\r\n    content: \" (\" attr(href) \")\";\r\n}\r\n\r\nh1 a[href]:after,\r\nh2 a[href]:after,\r\nh3 a[href]:after,\r\nsup a[href]:after,\r\n.comment-count[href]:after,\r\na[rel=\"tag\"]:after {\r\n    content: \"\";\r\n}\r\n\r\n/* show long-form for abbreviations in print */\r\nabbr[title]:after {\r\n    content: \" (\" attr(title) \")\";\r\n}\r\n\r\nh1 {\r\n    font-size: 32pt;\r\n    line-height: 36pt;\r\n    font-weight: normal;\r\n    padding-bottom: 16pt;\r\n}\r\n\r\nh2,\r\nh3 {\r\n    font-size: 14pt;\r\n    line-height: 18pt;\r\n    padding-bottom: 8pt;\r\n    page-break-after: avoid;\r\n    orphans: 3;\r\n    widows: 3;\r\n}\r\n\r\np {\r\n    padding-bottom: 8pt;\r\n    orphans: 3;\r\n    widows: 3;\r\n}\r\n\r\nfooter,\r\nfigcaption,\r\ntfoot,\r\nsmall,\r\n.footnote {\r\n    font-size: 6pt;\r\n    line-height: 9pt;\r\n}\r\n\r\nblockquote {\r\n    margin-bottom: 8pt;\r\n    border: solid 1pt black;\r\n    padding: 8pt 8pt 0;\r\n    page-break-inside: avoid;\r\n}\r\n\r\npre {\r\n    margin-bottom: 8pt;\r\n    border: solid 1pt black;\r\n    padding: 8pt;\r\n}\r\n\r\n.comments {\r\n    page-break-inside: avoid;\r\n}\r\n\r\npre,\r\ncode,\r\nkbd,\r\nsamp,\r\nvar {\r\n    font-family: \"Courier New\", Courier, monospace;\r\n}\r\n\r\ndfn,\r\nq,\r\ndt {\r\n    font-style: italic;\r\n}\r\n\r\nimg {\r\n    max-width: 100% !important;\r\n    page-break-inside: avoid;\r\n}\r\n\r\nfigure {\r\n    margin-bottom: 8pt;\r\n}\r\n\r\nfigcaption {\r\n    margin-top: 4pt;\r\n}\r\n\r\nul {\r\n    list-style: square;\r\n    margin: 0 0 8pt 1.8em;\r\n}\r\n\r\nol {\r\n    list-style: decimal;\r\n    margin: 0 0 8pt 1.8em;\r\n}\r\n\r\ndl {\r\n    margin: 0 0 8pt 1.8em;\r\n}\r\n\r\ntable {\r\n    margin-bottom: 8pt;\r\n    width: 100%;\r\n}\r\n\r\ncaption {\r\n    font-weight: bold;\r\n    text-align: left;\r\n    margin-bottom: 4pt;\r\n}\r\n\r\nthead,\r\ntfoot,\r\ntbody {\r\n    border-right: solid 1pt black;\r\n    border-left: solid 1pt black;\r\n}\r\n\r\n/* display table head across multi-page tables - http://css-discuss.incutio.com/wiki/Printing_Tables */\r\nthead {\r\n    display: table-header-group;\r\n}\r\n\r\ntr {\r\n    page-break-inside: avoid;\r\n}\r\n\r\nth,\r\ntd {\r\n    border-bottom: solid 1pt black;\r\n    padding: 4pt 8pt;\r\n}\r\n\r\nth {\r\n    text-align: left;\r\n    border-top: solid 1pt black;\r\n}\r\n\r\n\r\n}\r\n')";

$create_sql[] = "CREATE TABLE `".PFX."txp_discuss` (
  `discussid` int(6) unsigned zerofill NOT NULL auto_increment,
  `parentid` int(8) NOT NULL default '0',
  `name` varchar(255) NOT NULL default '',
  `email` varchar(50) NOT NULL default '',
  `web` varchar(255) NOT NULL default '',
  `ip` varchar(100) NOT NULL default '',
  `posted` datetime NOT NULL default '0000-00-00 00:00:00',
  `message` text NOT NULL,
  `visible` tinyint(4) NOT NULL default '1',
  PRIMARY KEY  (`discussid`),
  KEY `parentid` (`parentid`)
) $tabletype PACK_KEYS=1 AUTO_INCREMENT=2 ";

$create_sql[] = "INSERT INTO `".PFX."txp_discuss` VALUES (000001, 1, 'Donald Swain', 'donald.swain@example.com', 'example.com', '127.0.0.1', '2005-07-22 14:11:32', '<p>I enjoy your site very much.</p>', 1)";

$create_sql[] = "CREATE TABLE `".PFX."txp_discuss_ipban` (
  `ip` varchar(255) NOT NULL default '',
  `name_used` varchar(255) NOT NULL default '',
  `date_banned` datetime NOT NULL default '0000-00-00 00:00:00',
  `banned_on_message` int(8) NOT NULL default '0',
  PRIMARY KEY (`ip`)
) $tabletype ";

$create_sql[] = "CREATE TABLE `".PFX."txp_discuss_nonce` (
  `issue_time` datetime NOT NULL default '0000-00-00 00:00:00',
  `nonce` varchar(255) NOT NULL default '',
  `used` tinyint(4) NOT NULL default '0',
  `secret` varchar(255) NOT NULL default '',
  PRIMARY KEY (`nonce`)
) $tabletype ";

$create_sql[] = "CREATE TABLE `".PFX."txp_file` (
  `id` int(11) NOT NULL auto_increment,
  `filename` varchar(255) NOT NULL default '',
  `category` varchar(255) NOT NULL default '',
  `permissions` varchar(32) NOT NULL default '0',
  `description` text NOT NULL,
  `downloads` int(4) unsigned NOT NULL default '0',
  PRIMARY KEY  (`id`),
  UNIQUE KEY `filename` (`filename`)
) $tabletype PACK_KEYS=0 AUTO_INCREMENT=1 ";

$create_sql[] = "CREATE TABLE `".PFX."txp_form` (
  `name` varchar(64) NOT NULL,
  `type` varchar(28) NOT NULL default '',
  `Form` text NOT NULL,
  PRIMARY KEY (`name`)
) $tabletype PACK_KEYS=1";

$create_sql[] = "INSERT INTO `".PFX."txp_form` VALUES ('article_listing', 'article', '<txp:if_first_article><ul id=\"article-list\"></txp:if_first_article>\r\n    <li class=\"hentry\">\r\n        <h4 class=\"entry-title\"><txp:permlink><txp:title /></txp:permlink></h4>\r\n        <p class=\"footnote\"><txp:text item=\"posted\" /> <time class=\"updated\" datetime=\"<txp:posted format=\'iso8601\' />\" itemprop=\"published\"><txp:posted /></time>, <span class=\"byline author vcard\"><txp:text item=\"author\" /> <span class=\"fn\"><txp:author /></span></span></p>\r\n    </li>\r\n<txp:if_last_article></ul></txp:if_last_article>')";
$create_sql[] = "INSERT INTO `".PFX."txp_form` VALUES ('comments', 'comment', '<!-- load the comment email into a variable. you will be using below this along with author email variable loaded in form: default.article.txp\r\n    then check the comment email variable against article author email variable, and if it matches add \'comments-author\' class -->\r\n<txp:variable name=\"this_comment\" value=\'<txp:comment_email />\' />\r\n<txp:if_variable name=\"this_comment\" value=\'<txp:author_email />\'>\r\n    <article class=\"comments comments-author\">\r\n<txp:else />\r\n    <article class=\"comments\">\r\n</txp:if_variable>\r\n\r\n    <h4>\r\n\r\n    <txp:comment_name />\r\n\r\n    <!-- ...now check the comment email variable against article author email variable, and if it matches add \'(author)\' text -->\r\n    <txp:if_variable name=\"this_comment\" value=\'<txp:author_email />\'>\r\n        <span>(<txp:text item=\"author\" />)</span>\r\n    </txp:if_variable>\r\n\r\n    <!-- add a permlink so people can link direct to this comment -->\r\n    <txp:comment_permlink><span class=\"comment-anchor\">#</span></txp:comment_permlink>\r\n\r\n    </h4>\r\n\r\n    <!-- also add a \'since\' to show comment freshness -->\r\n    <p class=\"footnote\"><time datetime=\"<txp:comment_time format=\'iso8601\' />\"><txp:comment_time /> (<txp:comment_time format=\"since\" />)</time></p>\r\n\r\n    <txp:comment_message />\r\n\r\n</article>')";
$create_sql[] = "INSERT INTO `".PFX."txp_form` VALUES ('comments_display', 'article', '<!-- added an id attribute to the section so we can link directly to here e.g. http://mysite.com/section/article#comments-head -->\r\n\r\n<section id=\"comments-head\">\r\n\r\n<h3><txp:text item=\"comments\" /></h3>\r\n\r\n<!-- if there are comments, display them (note: example code below overrides the global preference setting for comments wrapping by stating\r\n    attributes of wraptag=\"\" and break=\"\", you are instead using ol and li tags below)... -->\r\n<txp:if_comments>\r\n    <ol class=\"comments-list\">\r\n\r\n        <txp:comments wraptag=\"\" break=\"li\" /> <!-- links by default to form: \'comments.comment.txp\' unless you specify a different form -->\r\n\r\n    <!-- if this is a comment preview, display it (but only if there is no error) -->\r\n        <txp:if_comments_preview>\r\n            <li>\r\n                <p id=\"cpreview\"><txp:text item=\"press_preview_then_submit\" /></p>\r\n                <txp:comments_preview wraptag=\"\" /> <!-- links by default to form: \'comments.comment.txp\' unless you specify a different form -->\r\n            </li>\r\n        </txp:if_comments_preview>\r\n\r\n    </ol>\r\n\r\n<txp:else />\r\n\r\n<!-- else if there are no comments and if user is currently previewing comment,display it (but only if there is no error) -->\r\n    <txp:if_comments_preview>\r\n        <ol class=\"comments-list\">\r\n            <li>\r\n                <p id=\"cpreview\"><txp:text item=\"press_preview_then_submit\" /></p>\r\n                <txp:comments_preview wraptag=\"\" /> <!-- links by default to form: \'comments.comment.txp\' unless you specify a different form -->\r\n            </li>\r\n        </ol>\r\n\r\n    <txp:else />\r\n\r\n<!-- else just display that there are simply no comments whatsoever :( ...but only if comments are allowed -->\r\n        <txp:if_comments_allowed>\r\n            <p><txp:text item=\"no_comments\" /></p>\r\n        </txp:if_comments_allowed>\r\n\r\n    </txp:if_comments_preview>\r\n\r\n</txp:if_comments>\r\n\r\n<!-- if new comments are allowed for this article then display comment form, if not then display \'closed\' messages -->\r\n<txp:if_comments_allowed>\r\n    <section id=\"comments-form\">\r\n\r\n        <!-- comment invite text is taken for the article\'s comment invitation field on the \'write\' screen -->\r\n        <h3><txp:comments_invite showcount=\"0\" textonly=\"1\" showalways=\"1\" /></h3>\r\n\r\n        <txp:comments_form isize=\"32\" msgcols=\"64\" msgrows=\"4\" /> <!-- links by default to form: \'comment_form.comment.txp\' unless you specify a different form -->\r\n    </section>\r\n\r\n<txp:else />\r\n    \r\n    <!-- display either a comments expired message or a comments disabled message -->\r\n    <txp:if_comments>\r\n        <p><strong><txp:text item=\"comments_expired\" /></strong></p>\r\n    <txp:else />\r\n        <p><strong><txp:text item=\"comments_closed\" /></strong></p>\r\n    </txp:if_comments>\r\n</txp:if_comments_allowed>\r\n\r\n</section>')";
$create_sql[] = "INSERT INTO `".PFX."txp_form` VALUES ('comment_form', 'comment', '<p><txp:text item=\"enter_comment_here\" /></p>\r\n\r\n<!-- if there is an error, then inform user -->\r\n<txp:if_comments_error>\r\n    <txp:comments_error wraptag=\"ol\" break=\"li\" class=\"error_message\" />\r\n</txp:if_comments_error>\r\n\r\n<fieldset>\r\n\r\n    <p class=\"large\"><label for=\"name\"><txp:text item=\"comment_name\" /> <b class=\"required\">*</b></label><br>\r\n    <txp:comment_name_input /></p>\r\n\r\n    <p class=\"large\"><label for=\"email\"><txp:text item=\"comment_email\" /> <b class=\"required\">*</b></label><br>\r\n    <txp:comment_email_input /></p>\r\n\r\n    <p class=\"large\"><label for=\"web\"><txp:text item=\"comment_web\" /></label><br>\r\n    <txp:comment_web_input /></p>\r\n\r\n    <p class=\"checkboxes\"><span><txp:comment_remember /></span></p>\r\n\r\n    <p class=\"small\"><label for=\"message\"><txp:text item=\"comment_message\" /> <b class=\"required\">*</b></label><br>\r\n    <txp:comment_message_input /></p>\r\n\r\n</fieldset>\r\n\r\n<!-- preview and submit buttons (note: submit button will have a class of \'disabled\' applied until you have previewed the message at least once) -->\r\n<p><txp:comment_preview /> <txp:comment_submit /></p>')";
$create_sql[] = "INSERT INTO `".PFX."txp_form` VALUES ('default', 'article', '<article class=\"hentry\" role=\"article\">\r\n\r\n<!-- if not an individual article then make the title h1 a link -->\r\n<txp:if_individual_article>\r\n    <h1 class=\"entry-title\"><txp:title /></h1>\r\n<txp:else />\r\n    <h1 class=\"entry-title\"><txp:permlink><txp:title /></txp:permlink></h1>\r\n</txp:if_individual_article>\r\n\r\n    <p><strong><txp:text item=\"posted\" /></strong> <time class=\"updated\" datetime=\"<txp:posted format=\'iso8601\' />\" itemprop=\"published\"><txp:posted /></time><br>\r\n        <strong><txp:text item=\"comments\" /></strong> <a class=\"comment-count\" href=\"<txp:permlink />#comments-head\" title=\"<txp:text item=\'view\' />&#8230;\">\r\n\r\n<!-- if comments then display the number, if no comments then print \'none\' -->\r\n<txp:if_comments>\r\n    <txp:comments_count />\r\n<txp:else />\r\n    <txp:text item=\"none\" />\r\n</txp:if_comments>\r\n\r\n    </a></p>\r\n\r\n    <div class=\"entry-content\">\r\n        <txp:body />\r\n    </div>\r\n\r\n    <p class=\"byline author vcard\"><strong><txp:text item=\"author\" /></strong> <span class=\"fn\"><txp:author /></span>\r\n\r\n<!-- only display categories if they are actually set for an article, otherwise omit -->\r\n    <txp:if_article_category>\r\n        <br><strong><txp:text item=\"categories\" /></strong> <txp:category1 title=\"1\" link=\"1\" /><txp:if_article_category number=\"1\"><txp:if_article_category number=\"2\">, </txp:if_article_category></txp:if_article_category><txp:category2 title=\"1\" link=\"1\" />\r\n    </txp:if_article_category>\r\n\r\n    </p>\r\n\r\n<!-- if this is an individual article then add the comments section via form: comments_display.article.txp -->\r\n<txp:if_individual_article>\r\n    <txp:article form=\"comments_display\" />\r\n</txp:if_individual_article>\r\n\r\n</article>')";
$create_sql[] = "INSERT INTO `".PFX."txp_form` VALUES ('files', 'file', '<!-- set up a variable to check whether a file also has a description associated with it... -->\r\n<txp:variable name=\"file_download_description\" value=\'<txp:file_download_description />\' />\r\n\r\n<strong><a href=\"<txp:file_download_link />\" title=\"<txp:file_download_name title=\'1\' />\"><txp:file_download_name title=\"1\" /></a></strong><br>\r\n\r\n<!-- ...now use that description, otherwise omit that line -->\r\n<txp:if_variable name=\"file_download_description\" value=\"\">\r\n\r\n<txp:else />\r\n\r\n<txp:file_download_description /><br>\r\n\r\n<txp:if_variable>\r\n\r\n<span class=\"footnote\">\r\n    <strong><txp:text item=\"category\" /></strong> <txp:file_download_category /> &#124; \r\n    <strong><txp:text item=\"file_size\" /></strong> <txp:file_download_size /> &#124; \r\n    <strong><txp:text item=\"last_modified\" /></strong> <txp:file_download_created /> &#124; \r\n    <strong><txp:text item=\"download_count\" /></strong> <txp:file_download_downloads />\r\n</span>')";
$create_sql[] = "INSERT INTO `".PFX."txp_form` VALUES ('images', 'misc', '<!-- set up a variable to check whether a image also has a caption associated with it... -->\r\n<txp:variable name=\"caption\" value=\'<txp:image_info type=\"caption\" />\' />\r\n\r\n<!-- ...now use that image caption and wrap img inside a figure with figcaption tags, otherwise just use a plain img tag -->\r\n<txp:if_variable name=\"caption\" value=\"\">\r\n\r\n<!-- image - overriding the width and height to let the image scale to fit parent container -->\r\n    <p><txp:image width=\"0\" height=\"0\" /></p>\r\n\r\n<txp:else />\r\n\r\n    <figure>\r\n\r\n<!-- image - overriding the width and height to let the image scale to fit parent container -->\r\n        <txp:image width=\"0\" height=\"0\" />\r\n\r\n<!-- you do not need to specify the attribute type=\"caption\" as that is the default setting for <txp:image_info /> tag -->\r\n        <figcaption><txp:image_info type=\"caption\" /></figcaption>\r\n\r\n    </figure>\r\n\r\n</txp:if_variable>')";
$create_sql[] = "INSERT INTO `".PFX."txp_form` VALUES ('Links', 'link', '<article>\r\n    <h4><txp:link /></h4>\r\n    <p><txp:link_description /><br>\r\n    <span class=\"footnote\">\r\n        <strong><txp:text item=\"category\" /></strong> <txp:link_category /> &#124; \r\n        <strong><txp:text item=\"author\" /></strong> <txp:link_author /> &#124; \r\n        <strong><txp:text item=\"date_added\" /></strong> <time datetime=\"<txp:link_date format=\'iso8601\' />\" itemprop=\"published\"><txp:link_date /></time>\r\n    </span>\r\n    </p>\r\n</article>')";
$create_sql[] = "INSERT INTO `".PFX."txp_form` VALUES ('plainlinks', 'link', '<!-- This is being used as an external links form, therefore rel is set to \'external\' -->\r\n<txp:linkdesctitle rel=\"external\" />')";
$create_sql[] = "INSERT INTO `".PFX."txp_form` VALUES ('search_input', 'misc', '<form role=\"search\" method=\"get\" action=\"<txp:site_url />\">\r\n    <h4><label for=\"search-textbox\"><txp:text item=\"search\" /></label></h4>\r\n    <p><input id=\"search-textbox\" type=\"search\" name=\"q\"<txp:if_search> value=\"<txp:search_term />\"</txp:if_search>><input type=\"submit\" value=\"<txp:text item=\'go\' />\"></p>\r\n</form>')";
$create_sql[] = "INSERT INTO `".PFX."txp_form` VALUES ('search_results', 'article', '<txp:if_search>\r\n\r\n<!-- count how many results return -->\r\n    <txp:article limit=\"10\" pgonly=\"1\" />\r\n\r\n    <txp:if_search_results>\r\n\r\n<!-- if search result count greater than 200 then display excessive results message, otherwise show search result count -->\r\n        <txp:if_search_results max=\"200\">\r\n            <h3><txp:search_result_count /> <txp:text item=\"matching_search_request\" /> &#8216;<txp:search_term />&#8217;&#8230;</h3>\r\n        <txp:else />\r\n            <h3><txp:text item=\"too_common_search_term\" /> &#8216;<txp:search_term />&#8217;</h3>\r\n        </txp:if_search_results>\r\n\r\n<!-- if no search results, then display no search results message -->\r\n    <txp:else />\r\n        <h3><txp:text item=\"no_search_matches\" /></h3>\r\n\r\n    </txp:if_search_results>\r\n\r\n<!-- display resulting articles (10 per page) -->\r\n    <txp:article limit=\"10\">\r\n\r\n        <article>\r\n\r\n            <h1><txp:permlink><txp:title /></txp:permlink></h1>\r\n            <p><strong><txp:text item=\"posted\" /></strong> <time datetime=\"<txp:posted format=\'iso8601\' />\" itemprop=\"published\"><txp:posted /></time></p>\r\n\r\n<!-- if the article has an excerpt, display that, otherwise show highlighted keywords in context of article -->\r\n            <txp:if_excerpt>\r\n                <txp:excerpt />\r\n            <txp:else />\r\n                <p><txp:search_result_excerpt /></p>\r\n            </txp:if_excerpt>\r\n\r\n<!-- display the URL of the article as text (and link) -->\r\n            <p class=\"footnote\"><txp:permlink><txp:permlink /></txp:permlink></p>\r\n\r\n        </article>\r\n\r\n    </txp:article>\r\n\r\n<!-- check if there are further results and provide pagination links or disabled buttons depending on the result,\r\n    this method is more flexibile than using simple txp:older/txp:newer tags -->\r\n    <txp:if_search_results min=\"11\">\r\n\r\n        <p id=\"paginator\">\r\n\r\n        <txp:variable name=\"prev\" value=\'<txp:older />\' />\r\n        <txp:variable name=\"next\" value=\'<txp:newer />\' />\r\n\r\n        <txp:if_variable name=\"next\" value=\"\">\r\n            <span id=\"paginator-l\" class=\"button disabled\">&#8592; <txp:text item=\"prev\" /></span>\r\n        <txp:else />\r\n                <a id=\"paginator-l\" href=\"<txp:newer />\" title=\"&#8592; <txp:text item=\"prev\" />\" class=\"button\">&#8592; <txp:text item=\"prev\" /></a>\r\n        </txp:if_variable>\r\n        <txp:if_variable name=\"prev\" value=\"\">\r\n            <span id=\"paginator-r\" class=\"button disabled\"><txp:text item=\"next\" /> &#8594;</span>\r\n        <txp:else />\r\n            <a id=\"paginator-r\" href=\"<txp:older />\" title=\"<txp:text item=\"next\" /> &#8594;\" class=\"button\"><txp:text item=\"next\" /> &#8594;</a>\r\n        </txp:if_variable>\r\n\r\n        </p>\r\n\r\n    </txp:if_search_results>\r\n\r\n</txp:if_search>')";

$create_sql[] = "CREATE TABLE `".PFX."txp_image` (
  `id` int(11) NOT NULL auto_increment,
  `name` varchar(255) NOT NULL default '',
  `category` varchar(255) NOT NULL default '',
  `ext` varchar(20) NOT NULL default '',
  `w` int(8) NOT NULL default '0',
  `h` int(8) NOT NULL default '0',
  `alt` varchar(255) NOT NULL default '',
  `caption` text NOT NULL,
  `date` datetime NOT NULL default '0000-00-00 00:00:00',
  `author` varchar(255) NOT NULL default '',
  `thumbnail` int(2) NOT NULL default '0',
  PRIMARY KEY  (`id`)
) $tabletype PACK_KEYS=0 AUTO_INCREMENT=2 ";

$create_sql[] = "INSERT INTO `".PFX."txp_image` VALUES (1, 'divider.gif', 'site-design', '.gif', 400, 1, '---', '', '2005-07-22 16:37:11', '".doSlash($name)."', 0)";
$create_sql[] = "INSERT INTO `".PFX."txp_image` VALUES (2, 'txp_slug105x45.gif', 'site-design', '.gif', 105, 45, 'Textpattern CMS', '', '1977-12-24 13:20:42', '".doSlash($name)."', 0)";

$create_sql[] = "CREATE TABLE `".PFX."txp_lang` (
  `id` int(9) NOT NULL auto_increment,
  `lang` varchar(16) NOT NULL,
  `name` varchar(64) NOT NULL,
  `event` varchar(64) NOT NULL,
  `data` tinytext,
  `lastmod` timestamp,
  PRIMARY KEY  (`id`),
  UNIQUE KEY `lang` (`lang`,`name`),
  KEY `lang_2` (`lang`,`event`)
) $tabletype AUTO_INCREMENT=1 ";

$create_sql[] = "CREATE TABLE `".PFX."txp_link` (
  `id` int(6) NOT NULL auto_increment,
  `date` datetime NOT NULL default '0000-00-00 00:00:00',
  `category` varchar(64) NOT NULL default '',
  `url` text NOT NULL,
  `linkname` varchar(255) NOT NULL default '',
  `linksort` varchar(128) NOT NULL default '',
  `description` text NOT NULL,
  PRIMARY KEY  (`id`)
) $tabletype PACK_KEYS=1 AUTO_INCREMENT=4 ";

$create_sql[] = "INSERT INTO `".PFX."txp_link` VALUES (1, '2005-07-20 12:54:26', 'textpattern', 'http://textpattern.com/', 'Textpattern', 'Textpattern', '')";
$create_sql[] = "INSERT INTO `".PFX."txp_link` VALUES (2, '2005-07-20 12:54:41', 'textpattern', 'http://textpattern.net/', 'User Documentation', 'User Documentation', '')";
$create_sql[] = "INSERT INTO `".PFX."txp_link` VALUES (3, '2005-07-20 12:55:04', 'textpattern', 'http://textpattern.org/', 'Txp Resources', 'Txp Resources', '')";

$create_sql[] = "CREATE TABLE `".PFX."txp_log` (
  `id` int(12) NOT NULL auto_increment,
  `time` datetime NOT NULL default '0000-00-00 00:00:00',
  `host` varchar(255) NOT NULL default '',
  `page` varchar(255) NOT NULL default '',
  `refer` mediumtext NOT NULL,
  `status` int(11) NOT NULL default '200',
  `method` varchar(16) NOT NULL default 'GET',
  `ip` varchar(16) NOT NULL default '',
  PRIMARY KEY  (`id`),
  KEY `time` (`time`)
) $tabletype AUTO_INCREMENT=77 ";

$create_sql[] = "CREATE TABLE `".PFX."txp_page` (
  `name` varchar(128) NOT NULL,
  `user_html` text NOT NULL,
  PRIMARY KEY (`name`)
) $tabletype PACK_KEYS=1";

$create_sql[] = "INSERT INTO `".PFX."txp_page` VALUES ('error_default', '<!doctype html>\r\n<html lang=\"<txp:lang />\">\r\n\r\n<head>\r\n    <meta charset=\"utf-8\">\r\n\r\n<!-- page title and metas, no meta keywords as they are now obsolete -->\r\n    <title><txp:error_status /></title>\r\n    <meta name=\"description\" content=\"<txp:error_message />\">\r\n    <meta name=\"generator\" content=\"Textpattern CMS\">\r\n    <meta name=\"robots\" content=\"none\">\r\n\r\n<!-- mobile viewport optimized: j.mp/bplateviewport -->\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\r\n\r\n<!-- content feeds -->\r\n    <txp:feed_link flavor=\"atom\" format=\"link\" label=\"Atom\" />\r\n    <txp:feed_link flavor=\"rss\" format=\"link\" label=\"RSS\" />\r\n    <txp:rsd />\r\n\r\n<!-- css -->\r\n    <!-- Google font API (remove this if you intend to use the theme in a project without internet access) -->\r\n    <link rel=\"stylesheet\" href=\"http://fonts.googleapis.com/css?family=PT+Serif:n4,i4,n7,i7|Cousine\">\r\n\r\n    <txp:css format=\"link\" media=\"\" />\r\n    <!-- or you can use (faster) external CSS files eg. <link rel=\"stylesheet\" href=\"<txp:site_url />css/default.css\"> -->\r\n\r\n<!-- HTML5/Media Queries support for IE < 9 (remove this if you intend to use the theme in a project without internet access) -->\r\n    <!--[if lt IE 9]>\r\n        <script src=\"http://html5shim.googlecode.com/svn/trunk/html5.js\"></script>\r\n        <script src=\"http://css3-mediaqueries-js.googlecode.com/svn/trunk/css3-mediaqueries.js\"></script>\r\n    <![endif]-->\r\n\r\n</head>\r\n\r\n<body id=\"error-page\">\r\n\r\n<!-- header -->\r\n    <header role=\"banner\">\r\n        <hgroup>\r\n            <h1><txp:link_to_home><txp:site_name /></txp:link_to_home></h1>\r\n            <h3><txp:site_slogan /></h3>\r\n        </hgroup>\r\n    </header>\r\n\r\n<!-- navigation -->\r\n    <nav role=\"navigation\">\r\n        <h1><txp:text item=\"navigation\" /></h1>\r\n        <txp:section_list default_title=\'<txp:text item=\"home\" />\' include_default=\"1\" wraptag=\"ul\" break=\"li\">\r\n            <txp:section link=\"1\" title=\"1\" />\r\n        </txp:section_list>\r\n    </nav>\r\n\r\n    <div class=\"wrapper\">\r\n        <div class=\"container\">\r\n\r\n<!-- left (main) column -->\r\n            <div role=\"main\">\r\n                <h1 class=\"error-status\"><txp:error_status /></h1>\r\n                <p class=\"error-msg\"><txp:error_message /></p>\r\n            </div> <!-- /main -->\r\n\r\n<!-- right (complementary) column -->\r\n            <div role=\"complementary\">\r\n                <txp:search_input /> <!-- links by default to form: \'search_input.misc.txp\' unless you specify a different form -->\r\n\r\n                <!-- Feed links, default flavor is rss, so we don\'t need to specify a flavor on the first feed_link -->\r\n                <p><txp:feed_link label=\"RSS\" class=\"feed-rss\" /> / <txp:feed_link flavor=\"atom\" label=\"Atom\" class=\"feed-atom\" /></p>\r\n\r\n                <h4><txp:text item=\"recent_articles\" /></h4>\r\n                <ul id=\"monthly-list\">\r\n                    <!-- using if_different tag to populate list only with months that actually contain articles -->\r\n                    <txp:article_custom section=\"articles\" limit=\"12\">\r\n                        <txp:if_different>\r\n                            <li><a href=\"<txp:site_url />articles/?month=<txp:posted format=\"%Y-%m\"/>\"><span class=\"archive-year\"><txp:posted format=\"%Y\" /></span> <span class=\"archive-month\"><txp:posted format=\"%b\"/></span></a></li>\r\n                        </txp:if_different>\r\n                    </txp:article_custom>\r\n                </ul>\r\n\r\n                <h4><txp:text item=\"external_links\" /></h4>\r\n                <txp:linklist wraptag=\"ul\" break=\"li\" limit=\"10\" /> <!-- links by default to form: \'plainlinks.link.txp\' unless you specify a different form -->\r\n            </div> <!-- /complementary -->\r\n\r\n        </div> <!-- /.container -->\r\n    </div> <!-- /.wrapper -->\r\n\r\n<!-- footer -->\r\n    <footer role=\"contentinfo\">\r\n        <p><small><txp:text item=\"published_with\" /> <a href=\"http://textpattern.com\" rel=\"external\">Textpattern CMS</a>.</small></p>\r\n    </footer>\r\n\r\n<!-- JavaScript at the bottom for fast page loading -->\r\n\r\n    <!-- add your own JavaScript here -->\r\n\r\n</body>\r\n</html>')";
$create_sql[] = "INSERT INTO `".PFX."txp_page` VALUES ('default', '<!doctype html>\r\n<html lang=\"<txp:lang />\">\r\n\r\n<head>\r\n    <meta charset=\"utf-8\">\r\n\r\n<!-- page title and metas, no meta keywords as they are now obsolete -->\r\n    <title><txp:page_title /></title>\r\n    <meta name=\"description\" content=\"\">\r\n    <meta name=\"generator\" content=\"Textpattern CMS\">\r\n    <txp:if_search>\r\n        <meta name=\"robots\" content=\"none\">\r\n    <txp:else />\r\n    <txp:if_category>\r\n        <meta name=\"robots\" content=\"noindex, follow, noodp, noydir\">\r\n    <txp:else />\r\n        <meta name=\"robots\" content=\"index, follow, noodp, noydir\">\r\n    </txp:if_category>\r\n    </txp:if_search>\r\n\r\n<!-- mobile viewport optimized: j.mp/bplateviewport -->\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\r\n\r\n<!-- content feeds -->\r\n    <txp:feed_link flavor=\"atom\" format=\"link\" label=\"Atom\" />\r\n    <txp:feed_link flavor=\"rss\" format=\"link\" label=\"RSS\" />\r\n    <txp:rsd />\r\n\r\n<!-- specify canonical, more info: http://googlewebmastercentral.blogspot.com/2009/02/specify-your-canonical.html -->\r\n    <txp:if_section name=\"\">\r\n        <link rel=\"canonical\" href=\"<txp:site_url />\">\r\n    <txp:else />\r\n        <txp:if_individual_article>\r\n            <link rel=\"canonical\" href=\"<txp:permlink />\">\r\n        <txp:else />\r\n            <link rel=\"canonical\" href=\"<txp:section url=\'1\' />\">\r\n        </txp:if_individual_article>\r\n    </txp:if_section>\r\n\r\n<!-- css -->\r\n    <!-- Google font API (remove this if you intend to use the theme in a project without internet access) -->\r\n    <link rel=\"stylesheet\" href=\"http://fonts.googleapis.com/css?family=PT+Serif:n4,i4,n7,i7|Cousine\">\r\n\r\n    <txp:css format=\"link\" media=\"\" />\r\n    <!-- or you can use (faster) external CSS files eg. <link rel=\"stylesheet\" href=\"<txp:site_url />css/default.css\"> -->\r\n\r\n<!-- HTML5/Media Queries support for IE < 9 (remove this if you intend to use the theme in a project without internet access) -->\r\n    <!--[if lt IE 9]>\r\n        <script src=\"http://html5shim.googlecode.com/svn/trunk/html5.js\"></script>\r\n        <script src=\"http://css3-mediaqueries-js.googlecode.com/svn/trunk/css3-mediaqueries.js\"></script>\r\n    <![endif]-->\r\n\r\n</head>\r\n\r\n<body id=\"<txp:if_section name=\"\"><txp:if_search>search<txp:else />front</txp:if_search><txp:else /><txp:section /></txp:if_section>-page\">\r\n\r\n<!-- header -->\r\n    <header role=\"banner\">\r\n        <hgroup>\r\n            <h1><txp:link_to_home><txp:site_name /></txp:link_to_home></h1>\r\n            <h3><txp:site_slogan /></h3>\r\n        </hgroup>\r\n    </header>\r\n\r\n<!-- navigation -->\r\n    <nav role=\"navigation\">\r\n        <h1><txp:text item=\"navigation\" /></h1>\r\n        <txp:section_list default_title=\'<txp:text item=\"home\" />\' include_default=\"1\" wraptag=\"ul\" break=\"li\">\r\n            <txp:section link=\"1\" title=\"1\" />\r\n        </txp:section_list>\r\n    </nav>\r\n\r\n    <div class=\"wrapper\">\r\n        <div class=\"container\">\r\n\r\n<!-- left (main) column -->\r\n            <div role=\"main\">\r\n\r\n            <!-- is this result result page? also omits the pagination links below (uses pagination format within search_results.article.txp instead) -->\r\n            <txp:if_search>\r\n\r\n                <h1><txp:text item=\"search_results\" /></h1>\r\n                <txp:output_form form=\"search_results\"/>\r\n\r\n            <txp:else />\r\n\r\n                <!-- else is this an article category list? -->\r\n                <txp:if_category>\r\n\r\n                    <h1><txp:text item=\"category\" /> <txp:category title=\"1\" /></h1>\r\n                    <div class=\"hfeed\">\r\n                        <txp:article form=\"article_listing\" limit=\"5\" />\r\n                    </div>\r\n\r\n                <!-- else display articles normally -->\r\n                <txp:else />\r\n\r\n                    <div class=\"hfeed\">\r\n                        <txp:article limit=\"5\" /> <!-- links by default to form: \'default.article.txp\' unless you specify a different form -->\r\n                    </div>\r\n\r\n                </txp:if_category>\r\n\r\n                <!-- add pagination links to foot of article/article listings/category listings if there are more articles available,\r\n                    this method is more flexibile than using simple txp:link_to_prev/txp:link_to_next or txp:older/txp:newer tags -->\r\n                <p id=\"paginator\">\r\n\r\n                <txp:variable name=\"prev\" value=\'<txp:older />\' />\r\n                <txp:variable name=\"next\" value=\'<txp:newer />\' />\r\n\r\n                <txp:if_variable name=\"prev\" value=\"\">\r\n                    <span id=\"paginator-l\" class=\"button disabled\">&#8592; <txp:text item=\"older\" /></span>\r\n                <txp:else />\r\n                    <a id=\"paginator-l\" href=\"<txp:older />\" title=\"<txp:text item=\'older\' />\" class=\"button\">&#8592; <txp:text item=\"older\" /></a>\r\n                </txp:if_variable>\r\n                <txp:if_variable name=\"next\" value=\"\">\r\n                    <span id=\"paginator-r\" class=\"button disabled\"><txp:text item=\"newer\" /> &#8594;</span>\r\n                <txp:else />\r\n                        <a id=\"paginator-r\" href=\"<txp:newer />\" title=\"<txp:text item=\'newer\' />\" class=\"button\"><txp:text item=\"newer\" /> &#8594;</a>\r\n                </txp:if_variable>\r\n\r\n                </p>\r\n\r\n            </txp:if_search>\r\n\r\n            </div> <!-- /main -->\r\n\r\n<!-- right (complementary) column -->\r\n            <div role=\"complementary\">\r\n                <txp:search_input /> <!-- links by default to form: \'search_input.misc.txp\' unless you specify a different form -->\r\n\r\n                <!-- Feed links, default flavor is rss, so we don\'t need to specify a flavor on the first feed_link -->\r\n                <p><txp:feed_link label=\"RSS\" class=\"feed-rss\" /> / <txp:feed_link flavor=\"atom\" label=\"Atom\" class=\"feed-atom\" /></p>\r\n\r\n                <h4><txp:text item=\"recent_articles\" /></h4>\r\n                <ul id=\"monthly-list\">\r\n                    <!-- using if_different tag to populate list only with months that actually contain articles -->\r\n                    <txp:article_custom section=\"articles\" limit=\"12\">\r\n                        <txp:if_different>\r\n                            <li><a href=\"<txp:site_url />articles/?month=<txp:posted format=\"%Y-%m\"/>\"><span class=\"archive-year\"><txp:posted format=\"%Y\" /></span> <span class=\"archive-month\"><txp:posted format=\"%b\"/></span></a></li>\r\n                        </txp:if_different>\r\n                    </txp:article_custom>\r\n                </ul>\r\n\r\n                <h4><txp:text item=\"external_links\" /></h4>\r\n                <txp:linklist wraptag=\"ul\" break=\"li\" limit=\"10\" /> <!-- links by default to form: \'plainlinks.link.txp\' unless you specify a different form -->\r\n            </div> <!-- /complementary -->\r\n\r\n        </div> <!-- /.container -->\r\n    </div> <!-- /.wrapper -->\r\n\r\n<!-- footer -->\r\n    <footer role=\"contentinfo\">\r\n        <p><small><txp:text item=\"published_with\" /> <a href=\"http://textpattern.com\" rel=\"external\">Textpattern CMS</a>.</small></p>\r\n    </footer>\r\n\r\n<!-- JavaScript at the bottom for fast page loading -->\r\n\r\n    <!-- add your own JavaScript here -->\r\n\r\n</body>\r\n</html>')";
$create_sql[] = "INSERT INTO `".PFX."txp_page` VALUES ('archive', '<!doctype html>\r\n<html lang=\"<txp:lang />\">\r\n\r\n<head>\r\n    <meta charset=\"utf-8\">\r\n\r\n<!-- page title and metas, no meta keywords as they are now obsolete -->\r\n    <title><txp:page_title /></title>\r\n    <meta name=\"description\" content=\"\">\r\n    <meta name=\"generator\" content=\"Textpattern CMS\">\r\n    <meta name=\"robots\" content=\"noindex, follow, noodp, noydir\">\r\n\r\n<!-- mobile viewport optimized: j.mp/bplateviewport -->\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\r\n\r\n<!-- content feeds -->\r\n    <txp:feed_link flavor=\"atom\" format=\"link\" label=\"Atom\" />\r\n    <txp:feed_link flavor=\"rss\" format=\"link\" label=\"RSS\" />\r\n    <txp:rsd />\r\n\r\n<!-- specify canonical, more info: http://googlewebmastercentral.blogspot.com/2009/02/specify-your-canonical.html -->\r\n    <txp:if_individual_article>\r\n        <link rel=\"canonical\" href=\"<txp:permlink />\">\r\n    <txp:else />\r\n        <link rel=\"canonical\" href=\"<txp:section url=\'1\' />\">\r\n    </txp:if_individual_article>\r\n\r\n<!-- css -->\r\n    <!-- Google font API (remove this if you intend to use the theme in a project without internet access) -->\r\n    <link rel=\"stylesheet\" href=\"http://fonts.googleapis.com/css?family=PT+Serif:n4,i4,n7,i7|Cousine\">\r\n\r\n    <txp:css format=\"link\" media=\"\" />\r\n    <!-- or you can use (faster) external CSS files eg. <link rel=\"stylesheet\" href=\"<txp:site_url />css/default.css\"> -->\r\n\r\n<!-- HTML5/Media Queries support for IE < 9 (remove this if you intend to use the theme in a project without internet access) -->\r\n    <!--[if lt IE 9]>\r\n        <script src=\"http://html5shim.googlecode.com/svn/trunk/html5.js\"></script>\r\n        <script src=\"http://css3-mediaqueries-js.googlecode.com/svn/trunk/css3-mediaqueries.js\"></script>\r\n    <![endif]-->\r\n\r\n</head>\r\n\r\n<body id=\"<txp:section />-page\">\r\n\r\n<!-- header -->\r\n    <header role=\"banner\">\r\n        <hgroup>\r\n            <h1><txp:link_to_home><txp:site_name /></txp:link_to_home></h1>\r\n            <h3><txp:site_slogan /></h3>\r\n        </hgroup>\r\n    </header>\r\n\r\n<!-- navigation -->\r\n    <nav role=\"navigation\">\r\n        <h1><txp:text item=\"navigation\" /></h1>\r\n        <txp:section_list default_title=\'<txp:text item=\"home\" />\' include_default=\"1\" wraptag=\"ul\" break=\"li\">\r\n            <txp:section link=\"1\" title=\"1\" />\r\n        </txp:section_list>\r\n    </nav>\r\n\r\n    <div class=\"wrapper\">\r\n        <div class=\"container\">\r\n\r\n<!-- left (main) column -->\r\n            <div role=\"main\">\r\n\r\n                <txp:if_article_list><h1><txp:section title=\"1\" /></h1></txp:if_article_list>\r\n\r\n                <div class=\"hfeed\">\r\n                    <txp:article listform=\"article_listing\" limit=\"5\" />\r\n                    <!-- or if you want to list all articles from all sections instead, then replace txp:article with txp:article_custom -->\r\n                </div>\r\n\r\n                <!-- add pagination links to foot of article/article listings if there are more articles available,\r\n                    this method is more flexibile than using simple txp:link_to_prev/txp:link_to_next or txp:older/txp:newer tags -->\r\n                <p id=\"paginator\">\r\n\r\n                <txp:if_individual_article>\r\n\r\n                    <txp:variable name=\"prev\" value=\'<txp:link_to_prev />\' />\r\n                    <txp:variable name=\"next\" value=\'<txp:link_to_next />\' />\r\n\r\n                    <txp:if_variable name=\"prev\" value=\"\">\r\n                        <span id=\"paginator-l\" class=\"button disabled\">&#8592; <txp:text item=\"older\" /></span>\r\n                    <txp:else />\r\n                        <a id=\"paginator-l\" href=\"<txp:link_to_prev />\" title=\"<txp:prev_title />\" class=\"button\">&#8592; <txp:text item=\"older\" /></a>\r\n                    </txp:if_variable>\r\n                    <txp:if_variable name=\"next\" value=\"\">\r\n                        <span id=\"paginator-r\" class=\"button disabled\"><txp:text item=\"newer\" /> &#8594;</span>\r\n                    <txp:else />\r\n                        <a id=\"paginator-r\" href=\"<txp:link_to_next />\" title=\"<txp:next_title />\" class=\"button\"><txp:text item=\"newer\" /> &#8594;</a>\r\n                    </txp:if_variable>\r\n\r\n                <txp:else />\r\n\r\n                    <txp:variable name=\"prev\" value=\'<txp:older />\' />\r\n                    <txp:variable name=\"next\" value=\'<txp:newer />\' />\r\n                    <txp:if_variable name=\"prev\" value=\"\">\r\n                        <span id=\"paginator-l\" class=\"button disabled\">&#8592; <txp:text item=\"older\" /></span>\r\n                    <txp:else />\r\n                        <a id=\"paginator-l\" href=\"<txp:older />\" title=\"<txp:text item=\'older\' />\" class=\"button\">&#8592; <txp:text item=\"older\" /></a>\r\n                    </txp:if_variable>\r\n                    <txp:if_variable name=\"next\" value=\"\">\r\n                        <span id=\"paginator-r\" class=\"button disabled\"><txp:text item=\"newer\" /> &#8594;</span>\r\n                    <txp:else />\r\n                        <a id=\"paginator-r\" href=\"<txp:newer />\" title=\"<txp:text item=\'newer\' />\" class=\"button\"><txp:text item=\"newer\" /> &#8594;</a>\r\n                    </txp:if_variable>\r\n\r\n                </txp:if_individual_article>\r\n\r\n                </p>\r\n\r\n            </div> <!-- /main -->\r\n\r\n    <!-- right (complementary) column -->\r\n            <div role=\"complementary\">\r\n                <txp:search_input /> <!-- links by default to form: \'search_input.misc.txp\' unless you specify a different form -->\r\n    \r\n                <!-- Feed links, default flavor is rss, so we don\'t need to specify a flavor on the first feed_link -->\r\n                <p><txp:feed_link label=\"RSS\" class=\"feed-rss\" /> / <txp:feed_link flavor=\"atom\" label=\"Atom\" class=\"feed-atom\" /></p>\r\n    \r\n                <h4><txp:text item=\"recent_articles\" /></h4>\r\n                <ul id=\"monthly-list\">\r\n                    <!-- using if_different tag to populate list only with months that actually contain articles -->\r\n                    <txp:article_custom section=\"articles\" limit=\"12\">\r\n                        <txp:if_different>\r\n                            <li><a href=\"<txp:site_url />articles/?month=<txp:posted format=\"%Y-%m\"/>\"><span class=\"archive-year\"><txp:posted format=\"%Y\" /></span> <span class=\"archive-month\"><txp:posted format=\"%b\"/></span></a></li>\r\n                        </txp:if_different>\r\n                    </txp:article_custom>\r\n                </ul>\r\n\r\n                <h4><txp:text item=\"external_links\" /></h4>\r\n                <txp:linklist wraptag=\"ul\" break=\"li\" limit=\"10\" /> <!-- links by default to form: \'plainlinks.link.txp\' unless you specify a different form -->\r\n            </div> <!-- /complementary -->\r\n\r\n        </div> <!-- /.container -->\r\n    </div> <!-- /.wrapper -->\r\n\r\n<!-- footer -->\r\n    <footer role=\"contentinfo\">\r\n        <p><small><txp:text item=\"published_with\" /> <a href=\"http://textpattern.com\" rel=\"external\">Textpattern CMS</a>.</small></p>\r\n    </footer>\r\n\r\n<!-- JavaScript at the bottom for fast page loading -->\r\n\r\n    <!-- add your own JavaScript here -->\r\n\r\n</body>\r\n</html>')";

$create_sql[] = "CREATE TABLE `".PFX."txp_plugin` (
  `name` varchar(64) NOT NULL default '',
  `status` int(2) NOT NULL default '1',
  `author` varchar(128) NOT NULL default '',
  `author_uri` varchar(128) NOT NULL default '',
  `version` varchar(10) NOT NULL default '1.0',
  `description` text NOT NULL,
  `help` text NOT NULL,
  `code` text NOT NULL,
  `code_restore` text NOT NULL,
  `code_md5` varchar(32) NOT NULL default '',
  `type` int(2) NOT NULL default '0',
  UNIQUE KEY `name` (`name`)
) $tabletype ";

$create_sql[] = "CREATE TABLE `".PFX."txp_prefs` (
  `prefs_id` int(11) NOT NULL,
  `name` varchar(255) NOT NULL,
  `val` varchar(255) NOT NULL default '',
  `type` smallint(5) unsigned NOT NULL default '2',
  `event` varchar(12) NOT NULL default 'publish',
  `html` varchar(64) NOT NULL default 'text_input',
  `position` smallint(5) unsigned NOT NULL default '0',
  `user_name` varchar(64) NOT NULL default '',
  UNIQUE KEY `prefs_idx` (`prefs_id`,`name`, `user_name`),
  KEY `name` (`name`),
  KEY `user_name` (`user_name`)
) $tabletype ";

$prefs['blog_uid'] = md5(uniqid(rand(),true));
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'prefs_id', '1', 2, 'publish', 'text_input', 0, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'sitename', '".doSlash(gTxt('my_site'))."', 0, 'publish', 'text_input', 10, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'siteurl', 'comment.local', 0, 'publish', 'text_input', 20, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'site_slogan', '".doSlash(gTxt('my_slogan'))."', 0, 'publish', 'text_input', 30, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'language', 'en-gb', 2, 'publish', 'languages', 40, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'url_mode', '1', 2, 'publish', 'text_input', 0, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'timeoffset', '0', 2, 'publish', 'text_input', 0, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'comments_on_default', '0', 0, 'comments', 'yesnoradio', 140, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'comments_default_invite', '".$setup_comment_invite."', 0, 'comments', 'text_input', 180, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'comments_mode', '0', 0, 'comments', 'commentmode', 200, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'comments_disabled_after', '42', 0, 'comments', 'weeks', 210, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'use_textile', '2', 0, 'publish', 'pref_text', 110, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'ping_weblogsdotcom', '0', 1, 'publish', 'yesnoradio', 0, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'rss_how_many', '5', 1, 'admin', 'text_input', 0, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'logging', 'all', 0, 'publish', 'logging', 100, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'use_comments', '1', 0, 'publish', 'yesnoradio', 120, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'use_categories', '1', 2, 'publish', 'text_input', 0, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'use_sections', '1', 2, 'publish', 'text_input', 0, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'send_lastmod', '0', 1, 'admin', 'yesnoradio', 0, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'path_from_root', '/', 2, 'publish', 'text_input', 0, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'lastmod', '2005-07-23 16:24:10', 2, 'publish', 'text_input', 0, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'comments_dateformat', '%b %d, %I:%M %p', 0, 'comments', 'dateformats', 190, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'dateformat', 'since', 0, 'publish', 'dateformats', 70, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'archive_dateformat', '%b %d, %I:%M %p', 0, 'publish', 'dateformats', 80, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'comments_moderate', '1', 0, 'comments', 'yesnoradio', 130, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'img_dir', 'images', 1, 'admin', 'text_input', 0, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'comments_disallow_images', '0', 0, 'comments', 'yesnoradio', 170, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'comments_sendmail', '0', 0, 'comments', 'yesnoradio', 160, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'file_max_upload_size', '2000000', 1, 'admin', 'text_input', 0, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'file_list_pageby', '25', 2, 'publish', 'text_input', 0, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'path_to_site', '', 2, 'publish', 'text_input', 0, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'article_list_pageby', '25', 2, 'publish', 'text_input', 0, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'link_list_pageby', '25', 2, 'publish', 'text_input', 0, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'image_list_pageby', '25', 2, 'publish', 'text_input', 0, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'log_list_pageby', '25', 2, 'publish', 'text_input', 0, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'comment_list_pageby', '25', 2, 'publish', 'text_input', 0, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'permlink_mode', '".doSlash($permlink_mode)."', 0, 'publish', 'permlinkmodes', 90, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'comments_are_ol', '1', 0, 'comments', 'yesnoradio', 150, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'is_dst', '0', 0, 'publish', 'yesnoradio', 60, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'locale', 'en_GB.UTF-8', 2, 'publish', 'text_input', 0, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'tempdir', '".doSlash(find_temp_dir())."', 1, 'admin', 'text_input', 0, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'file_base_path', '".doSlash(dirname(txpath).DS.'files')."', 1, 'admin', 'text_input', 0, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'blog_uid', '". $prefs['blog_uid'] ."', 2, 'publish', 'text_input', 0, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'blog_mail_uid', '".doSlash(ps('email'))."', 2, 'publish', 'text_input', 0, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'blog_time_uid', '2005', 2, 'publish', 'text_input', 0, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'edit_raw_css_by_default', '1', 1, 'css', 'yesnoradio', 0, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'allow_page_php_scripting', '1', 1, 'publish', 'yesnoradio', 0, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'allow_article_php_scripting', '1', 1, 'publish', 'yesnoradio', 0, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'allow_raw_php_scripting', '0', 1, 'publish', 'yesnoradio', 0, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'textile_links', '0', 1, 'link', 'yesnoradio', 0, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'show_article_category_count', '1', 2, 'category', 'yesnoradio', 0, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'show_comment_count_in_feed', '1', 1, 'publish', 'yesnoradio', 0, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'syndicate_body_or_excerpt', '1', 1, 'publish', 'yesnoradio', 0, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'include_email_atom', '1', 1, 'publish', 'yesnoradio', 0, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'comment_means_site_updated', '1', 1, 'publish', 'yesnoradio', 0, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'never_display_email', '0', 1, 'publish', 'yesnoradio', 0, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'comments_require_name', '1', 1, 'comments', 'yesnoradio', 0, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'comments_require_email', '1', 1, 'comments', 'yesnoradio', 0, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'articles_use_excerpts', '1', 1, 'publish', 'yesnoradio', 0, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'allow_form_override', '1', 1, 'publish', 'yesnoradio', 0, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'attach_titles_to_permalinks', '1', 1, 'publish', 'yesnoradio', 0, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'permalink_title_format', '1', 1, 'publish', 'yesnoradio', 0, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'expire_logs_after', '7', 1, 'publish', 'text_input', 0, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'use_plugins', '1', 1, 'publish', 'yesnoradio', 0, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'custom_1_set', 'custom1', 1, 'custom', 'text_input', 1, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'custom_2_set', 'custom2', 1, 'custom', 'text_input', 2, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'custom_3_set', '', 1, 'custom', 'text_input', 3, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'custom_4_set', '', 1, 'custom', 'text_input', 4, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'custom_5_set', '', 1, 'custom', 'text_input', 5, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'custom_6_set', '', 1, 'custom', 'text_input', 6, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'custom_7_set', '', 1, 'custom', 'text_input', 7, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'custom_8_set', '', 1, 'custom', 'text_input', 8, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'custom_9_set', '', 1, 'custom', 'text_input', 9, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'custom_10_set', '', 1, 'custom', 'text_input', 10, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'ping_textpattern_com', '1', 1, 'publish', 'yesnoradio', 0, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'use_dns', '1', 1, 'publish', 'yesnoradio', 0, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'admin_side_plugins', '1', 1, 'publish', 'yesnoradio', 0, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'comment_nofollow', '1', 1, 'publish', 'yesnoradio', 0, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'use_mail_on_feeds_id', '0', 1, 'publish', 'yesnoradio', 0, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'max_url_len', '200', 1, 'publish', 'text_input', 0, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'spam_blacklists', 'sbl.spamhaus.org', 1, 'publish', 'text_input', 0, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'override_emailcharset', '0', 1, 'admin', 'yesnoradio', 21, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'production_status', 'testing', 0, 'publish', 'prod_levels', 210, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'comments_auto_append', '0', 0, 'comments', 'yesnoradio', 211, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'dbupdatetime', '1122194504', 2, 'publish', 'text_input', 0, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'version', '1.0rc4', 2, 'publish', 'text_input', 0, '')";
$create_sql[] = "INSERT INTO `".PFX."txp_prefs` VALUES (1, 'doctype', 'html5', 0, 'publish', 'doctypes', 190, '')";

$create_sql[] = "CREATE TABLE `".PFX."txp_section` (
  `name` varchar(128) NOT NULL,
  `page` varchar(128) NOT NULL default '',
  `css` varchar(128) NOT NULL default '',
  `is_default` int(2) NOT NULL default '0',
  `in_rss` int(2) NOT NULL default '1',
  `on_frontpage` int(2) NOT NULL default '1',
  `searchable` int(2) NOT NULL default '1',
  `title` varchar(255) NOT NULL default '',
  PRIMARY KEY (`name`)
) $tabletype PACK_KEYS=1";

$create_sql[] = "INSERT INTO `".PFX."txp_section` VALUES ('articles', 'archive', 'default', 1, 1, 1, 1, 'Articles')";
$create_sql[] = "INSERT INTO `".PFX."txp_section` VALUES ('default', 'default', 'default', 0, 1, 1, 1, 'default')";
$create_sql[] = "INSERT INTO `".PFX."txp_section` VALUES ('about', 'default', 'default', 0, 0, 0, 1, 'About')";

$create_sql[] = "CREATE TABLE `".PFX."txp_users` (
  `user_id` int(4) NOT NULL auto_increment,
  `name` varchar(64) NOT NULL default '',
  `pass` varchar(128) NOT NULL default '',
  `RealName` varchar(64) NOT NULL default '',
  `email` varchar(100) NOT NULL default '',
  `privs` tinyint(2) NOT NULL default '1',
  `last_access` datetime NOT NULL default '0000-00-00 00:00:00',
  `nonce` varchar(64) NOT NULL default '',
  PRIMARY KEY  (`user_id`),
  UNIQUE KEY `name` (`name`)
) $tabletype PACK_KEYS=1 AUTO_INCREMENT=2 ";


$GLOBALS['txp_install_successful'] = true;
$GLOBALS['txp_err_count'] = 0;
foreach ($create_sql as $query)
{
	$result = mysql_query($query);
	if (!$result)
	{
		$GLOBALS['txp_err_count']++;
		echo "<b>".$GLOBALS['txp_err_count'].".</b> ".mysql_error()."<br />\n";
		echo "<!--\n $query \n-->\n";
		$GLOBALS['txp_install_successful'] = false;
	}
}

# Skip the RPC language fetch when testing
if (defined('TXP_TEST'))
	return;

require_once txpath.'/lib/IXRClass.php';
$client = new IXR_Client('http://rpc.textpattern.com');

if (!$client->query('tups.getLanguage',$prefs['blog_uid'],LANG))
{
	# If cannot install from lang file, setup the english lang
	if (!install_language_from_file(LANG))
	{
		$lang = 'en-gb';
		include_once txpath.'/setup/en-gb.php';
		if (!@$lastmod) $lastmod = '0000-00-00 00:00:00';
		foreach ($en_gb_lang as $evt_name => $evt_strings)
		{
			foreach ($evt_strings as $lang_key => $lang_val)
			{
				$lang_val = doSlash($lang_val);
				if (@$lang_val)
					mysql_query("INSERT DELAYED INTO `".PFX."txp_lang` SET lang='en-gb', name='".$lang_key."', event='".$evt_name."', data='".$lang_val."', lastmod='".$lastmod."'");
			}
		}
	}
}
else
{
	$response = $client->getResponse();
	$lang_struct = unserialize($response);
	foreach ($lang_struct as $item)
	{
		foreach ($item as $name => $value)
			$item[$name] = doSlash($value);
		mysql_query("INSERT DELAYED INTO `".PFX."txp_lang` SET lang='".LANG."', name='".$item['name']."', event='".$item['event']."', data='".$item['data']."', lastmod='".strftime('%Y%m%d%H%M%S',$item['uLastmod'])."'");
	}
}

mysql_query("FLUSH TABLE `".PFX."txp_lang`");

?>
